<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RetailAOT v5.0 - Retail Operations System</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #1a73e8; --success: #34a853; --warning: #fbbc04; --danger: #ea4335;
            --orange: #ff6d00; --purple: #7c3aed; --dark: #1a1a2e;
            --gray-50: #f9fafb; --gray-100: #f3f4f6; --gray-200: #e5e7eb; --gray-300: #d1d5db;
            --gray-400: #9ca3af; --gray-500: #6b7280; --gray-600: #4b5563; --gray-700: #374151;
            --gray-800: #1f2937; --gray-900: #111827;
        }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--gray-100); }
        .app-shell { max-width: 480px; margin: 0 auto; min-height: 100vh; background: white; position: relative; box-shadow: 0 0 40px rgba(0,0,0,0.1); }
        
        /* App Selector */
        .app-nav { display: flex; background: var(--dark); padding: 8px; gap: 4px; overflow-x: auto; position: sticky; top: 0; z-index: 100; }
        .app-nav::-webkit-scrollbar { display: none; }
        .app-btn { padding: 8px 12px; border-radius: 8px; font-size: 11px; font-weight: 600; cursor: pointer; white-space: nowrap; color: rgba(255,255,255,0.6); border: none; background: transparent; transition: all 0.2s; display: flex; align-items: center; gap: 6px; }
        .app-btn:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); }
        .app-btn.active { background: var(--primary); color: white; }
        
        /* Headers */
        .header { padding: 16px 20px; display: flex; align-items: center; gap: 12px; color: white; }
        .header h1 { font-size: 18px; font-weight: 600; flex: 1; }
        .header-btn { background: rgba(255,255,255,0.2); border: none; color: white; width: 38px; height: 38px; border-radius: 50%; cursor: pointer; font-size: 16px; position: relative; }
        .header-btn:hover { background: rgba(255,255,255,0.3); }
        .badge-count { position: absolute; top: -4px; right: -4px; background: var(--danger); color: white; font-size: 10px; font-weight: 700; min-width: 18px; height: 18px; border-radius: 9px; display: flex; align-items: center; justify-content: center; }
        
        /* Content */
        .content { padding: 16px; background: var(--gray-50); min-height: calc(100vh - 180px); padding-bottom: 80px; }
        
        /* Cards */
        .card { background: white; border-radius: 16px; margin-bottom: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); overflow: hidden; }
        .card-header { padding: 14px 16px; border-bottom: 1px solid var(--gray-100); font-weight: 600; font-size: 14px; display: flex; justify-content: space-between; align-items: center; }
        .card-body { padding: 16px; }
        
        /* Stats Grid */
        .stats-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 16px; }
        .stat-card { background: white; padding: 16px; border-radius: 12px; text-align: center; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
        .stat-value { font-size: 28px; font-weight: 700; line-height: 1.2; }
        .stat-label { font-size: 11px; color: var(--gray-500); margin-top: 4px; text-transform: uppercase; letter-spacing: 0.5px; }
        
        /* List Items */
        .list-item { display: flex; padding: 14px 16px; border-bottom: 1px solid var(--gray-100); cursor: pointer; align-items: center; gap: 12px; transition: background 0.15s; }
        .list-item:hover { background: var(--gray-50); }
        .list-item:last-child { border-bottom: none; }
        .list-icon { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 18px; flex-shrink: 0; }
        .list-content { flex: 1; min-width: 0; }
        .list-title { font-weight: 600; font-size: 14px; color: var(--gray-800); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .list-subtitle { font-size: 12px; color: var(--gray-500); margin-top: 2px; }
        .list-meta { text-align: right; flex-shrink: 0; }
        .list-price { font-weight: 700; font-size: 15px; color: var(--gray-800); }
        .list-commission { font-size: 11px; color: var(--success); font-weight: 600; }
        
        /* Badges */
        .badge { font-size: 10px; padding: 4px 10px; border-radius: 12px; font-weight: 600; display: inline-block; text-transform: uppercase; letter-spacing: 0.3px; }
        .badge-success { background: #dcfce7; color: #166534; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #991b1b; }
        .badge-info { background: #dbeafe; color: #1e40af; }
        .badge-purple { background: #f3e8ff; color: #7c3aed; }
        
        /* Buttons */
        .btn { padding: 12px 20px; border: none; border-radius: 10px; font-size: 14px; font-weight: 600; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover:not(:disabled) { background: #1557b0; }
        .btn-success { background: var(--success); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-warning { background: var(--warning); color: var(--gray-800); }
        .btn-outline { background: white; border: 1.5px solid var(--gray-300); color: var(--gray-700); }
        .btn-outline:hover { border-color: var(--gray-400); background: var(--gray-50); }
        .btn-sm { padding: 8px 14px; font-size: 12px; }
        .btn-block { width: 100%; }
        
        /* Forms */
        .form-group { margin-bottom: 16px; }
        .form-label { display: block; font-size: 13px; font-weight: 600; color: var(--gray-700); margin-bottom: 6px; }
        .form-input, .form-select, .form-textarea { width: 100%; padding: 12px 14px; border: 1.5px solid var(--gray-300); border-radius: 10px; font-size: 15px; font-family: inherit; background: white; transition: border-color 0.2s, box-shadow 0.2s; }
        .form-input:focus, .form-select:focus, .form-textarea:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(26,115,232,0.1); }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        
        /* Bottom Nav */
        .bottom-nav { display: flex; background: white; border-top: 1px solid var(--gray-200); position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 480px; z-index: 50; padding: 8px 0 max(8px, env(safe-area-inset-bottom)); }
        .nav-item { flex: 1; padding: 8px 4px; text-align: center; cursor: pointer; color: var(--gray-400); font-size: 10px; font-weight: 600; border: none; background: none; transition: color 0.2s; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { display: block; font-size: 20px; margin-bottom: 4px; }
        
        /* FAB */
        .fab { position: fixed; bottom: 90px; right: calc(50% - 200px); width: 56px; height: 56px; border-radius: 16px; background: var(--primary); color: white; border: none; font-size: 24px; cursor: pointer; box-shadow: 0 4px 14px rgba(26,115,232,0.4); z-index: 40; transition: transform 0.2s, box-shadow 0.2s; }
        .fab:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(26,115,232,0.5); }
        
        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; padding: 20px; backdrop-filter: blur(4px); }
        .modal { background: white; border-radius: 20px; width: 100%; max-width: 420px; max-height: 90vh; overflow: hidden; display: flex; flex-direction: column; animation: modalIn 0.2s ease; }
        @keyframes modalIn { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        .modal-header { padding: 18px 20px; border-bottom: 1px solid var(--gray-200); display: flex; justify-content: space-between; align-items: center; background: white; position: sticky; top: 0; z-index: 1; }
        .modal-header h2 { font-size: 18px; font-weight: 700; }
        .modal-close { background: var(--gray-100); border: none; font-size: 20px; cursor: pointer; color: var(--gray-500); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .modal-body { padding: 20px; overflow-y: auto; flex: 1; }
        .modal-footer { padding: 16px 20px; border-top: 1px solid var(--gray-200); display: flex; gap: 12px; background: white; position: sticky; bottom: 0; }
        
        /* Alerts */
        .alert { padding: 14px 16px; border-radius: 12px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px; font-size: 14px; }
        .alert-warning { background: #fef3c7; color: #92400e; }
        .alert-success { background: #dcfce7; color: #166534; }
        .alert-danger { background: #fee2e2; color: #991b1b; }
        .alert-info { background: #dbeafe; color: #1e40af; }
        
        /* Search */
        .search-bar { padding: 12px 16px; background: white; border-bottom: 1px solid var(--gray-200); position: relative; }
        .search-input { width: 100%; padding: 12px 16px 12px 44px; border: 1.5px solid var(--gray-200); border-radius: 12px; font-size: 15px; background: var(--gray-50); }
        .search-input:focus { outline: none; border-color: var(--primary); background: white; }
        .search-icon { position: absolute; left: 30px; top: 50%; transform: translateY(-50%); color: var(--gray-400); }
        
        /* Inner Tabs */
        .inner-tabs { display: flex; background: white; border-bottom: 1px solid var(--gray-200); overflow-x: auto; }
        .inner-tab { flex: 1; padding: 14px 12px; text-align: center; font-size: 13px; font-weight: 600; color: var(--gray-500); cursor: pointer; border: none; background: none; border-bottom: 3px solid transparent; white-space: nowrap; min-width: 80px; transition: all 0.2s; }
        .inner-tab.active { color: var(--primary); border-bottom-color: var(--primary); }
        
        /* Progress */
        .progress-bar { height: 8px; background: var(--gray-200); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 4px; transition: width 0.3s ease; }
        
        /* Toast */
        .toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: var(--gray-800); color: white; padding: 14px 24px; border-radius: 12px; z-index: 2000; animation: toastIn 0.3s ease; font-weight: 500; box-shadow: 0 4px 20px rgba(0,0,0,0.3); }
        @keyframes toastIn { from { opacity: 0; transform: translate(-50%, 20px); } to { opacity: 1; transform: translate(-50%, 0); } }
        
        /* Empty State */
        .empty-state { text-align: center; padding: 48px 24px; color: var(--gray-400); }
        .empty-state i { font-size: 56px; margin-bottom: 16px; opacity: 0.5; }
        .empty-state p { font-size: 15px; }
        
        /* Route Stop */
        .route-stop { display: flex; gap: 14px; padding: 16px; border-bottom: 1px solid var(--gray-100); }
        .stop-number { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 14px; flex-shrink: 0; }
        
        /* Info Rows */
        .info-row { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--gray-100); font-size: 14px; }
        .info-row:last-child { border-bottom: none; }
        .info-row span:first-child { color: var(--gray-500); }
        .info-row span:last-child { font-weight: 600; color: var(--gray-800); }
        
        /* Revenue Card */
        .revenue-card { padding: 24px; background: linear-gradient(135deg, var(--dark) 0%, #16213e 100%); color: white; border-radius: 16px; margin-bottom: 16px; }
        .revenue-amount { font-size: 36px; font-weight: 800; margin: 8px 0; }
        .revenue-meta { display: flex; gap: 24px; margin-top: 16px; font-size: 13px; opacity: 0.9; }
        
        /* Action Buttons Row */
        .action-row { display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap; }
        
        /* Signature Pad */
        .signature-pad { border: 2px dashed var(--gray-300); border-radius: 12px; height: 100px; display: flex; align-items: center; justify-content: center; color: var(--gray-400); cursor: pointer; background: var(--gray-50); transition: all 0.2s; }
        .signature-pad:hover { border-color: var(--gray-400); }
        .signature-pad.signed { background: #dcfce7; border-color: var(--success); color: var(--success); }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--gray-300); border-radius: 3px; }
    </style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const SEED_DATA = {"brandRankings":[{"Brand":"Samsung","Qty":171,"Cost":0.0,"Profit":162952.06,"Revenue":162952.06},{"Brand":"Whirlpool","Qty":85,"Cost":0.0,"Profit":60938.35,"Revenue":60938.35},{"Brand":"LG","Qty":66,"Cost":0.0,"Profit":55514.96,"Revenue":55514.96},{"Brand":"Frigidaire","Qty":50,"Cost":0.0,"Profit":34427.72,"Revenue":34427.72},{"Brand":"Appliance Outlet","Qty":579,"Cost":0.0,"Profit":33321.8,"Revenue":33321.8},{"Brand":"Frigidaire Gallery","Qty":29,"Cost":0.0,"Profit":30073.73,"Revenue":30073.73},{"Brand":"GE","Qty":44,"Cost":1348.0,"Profit":26627.92,"Revenue":27975.92},{"Brand":"ZLINE","Qty":13,"Cost":0.0,"Profit":26181.97,"Revenue":26181.97},{"Brand":"Maytag","Qty":32,"Cost":0.0,"Profit":23021.1,"Revenue":23021.1},{"Brand":"KitchenAid","Qty":11,"Cost":0.0,"Profit":20402.0,"Revenue":20402.0},{"Brand":"Forno","Qty":8,"Cost":0.0,"Profit":16734.0,"Revenue":16734.0},{"Brand":"Cafe","Qty":7,"Cost":0.0,"Profit":13399.0,"Revenue":13399.0},{"Brand":"GE Profile","Qty":10,"Cost":0.0,"Profit":10944.2,"Revenue":10944.2},{"Brand":"Element","Qty":14,"Cost":0.0,"Profit":10087.0,"Revenue":10087.0},{"Brand":"Electrolux","Qty":10,"Cost":0.0,"Profit":7687.0,"Revenue":7687.0}],"locationRankings":[{"Location":"45N SR","Qty":285,"Cost":13.0,"Profit":149673.1,"Revenue":149686.1},{"Location":"HEMPST","Qty":272,"Cost":0.0,"Profit":122557.64,"Revenue":122557.64},{"Location":"PASADE","Qty":199,"Cost":13.0,"Profit":96999.16,"Revenue":97012.16},{"Location":"SPRING","Qty":189,"Cost":0.0,"Profit":84431.15,"Revenue":84431.15},{"Location":"CONROE","Qty":149,"Cost":0.0,"Profit":74799.85,"Revenue":74799.85},{"Location":"HWY6","Qty":127,"Cost":1348.0,"Profit":55273.08,"Revenue":56621.08}],"users":[{"id":"u1","name":"Teddy Bernales","email":"ianbernales15@gmail.com","role":"Sales","location":"loc_1"},{"id":"u2","name":"Alondra Lopez","email":"alondra@applianceoutlettexas.com","role":"Sales","location":"loc_1"},{"id":"u3","name":"Andres Rusic","email":"Creative@marketingaide.io","role":"Sales","location":"loc_1"},{"id":"u4","name":"Brandon Stanberry","email":"bkstanberry@gmail.com","role":"Warehouse","location":"loc_1"},{"id":"u5","name":"Brian Nguyen","email":"brriannguyen@gmail.com","role":"Driver","location":"loc_1"},{"id":"u6","name":"Camila  Calderon","email":"camila@applianceoutlettexas.com","role":"Technician","location":"loc_1"},{"id":"u7","name":"Carloz De La Cruz","email":"Carlozdelacruz@yahoo.com","role":"Admin","location":"loc_1"},{"id":"u8","name":"Devin Snow","email":"dsnowap@gmail.com","role":"Manager","location":"loc_1"},{"id":"u9","name":"Diego De La Fuente","email":"diegodelafuentepi6605@gmail.com","role":"Sales","location":"loc_1"},{"id":"u10","name":"Dontavious Smith","email":"dontavious.taetae@gmail.com","role":"Sales","location":"loc_1"},{"id":"u11","name":"Dsava","email":"dsava@taxcofinances.com","role":"Sales","location":"loc_1"},{"id":"u12","name":"Fatima De Bastos","email":"fatima@applianceoutlettexas.com","role":"Warehouse","location":"loc_1"},{"id":"u13","name":"Felipe Fernandez","email":"felipe.gerardo.fernandez@gmail.com","role":"Driver","location":"loc_1"},{"id":"u14","name":"Francisco Javier Sanchez","email":"javier141725@gmail.com","role":"Technician","location":"loc_1"},{"id":"u15","name":"Franklin Calderini","email":"franklincalderini20@gmail.com","role":"Admin","location":"loc_1"}],"transferRequests":[{"id":"tr27","brand":"Frigidaire","model":"FDPH4316AS","customerName":"Marlon Fite","inventoryId":464,"requestedBy":"Brian Nguyen","fromLocation":"SPRING","toLocation":"45WH","dateNeeded":"10/21/2025","status":"Open"},{"id":"tr29","brand":"GE","model":"GTW525ACWWB","customerName":"Maria Perez","inventoryId":1706,"requestedBy":"Brandon Stanberry","fromLocation":"PASADE","toLocation":"45WH","dateNeeded":"10/24/2025","status":"Open"},{"id":"tr28","brand":"GE","model":"GTX52EASPWB","customerName":"Maria Perez","inventoryId":1705,"requestedBy":"Brandon Stanberry","fromLocation":"PASADE","toLocation":"45WH","dateNeeded":"10/24/2025","status":"Open"},{"id":"tr30","brand":"Rheem","model":"XE38S06ST45U1","customerName":"nan","inventoryId":2252,"requestedBy":"Yineth Ventura","fromLocation":"45WH","toLocation":"PASADE","dateNeeded":"10/25/2025","status":"Open"},{"id":"tr31","brand":"Samsung","model":"WD90F53AVB","customerName":"South American Export","inventoryId":1651,"requestedBy":"Camila  Calderon ","fromLocation":"PASADE","toLocation":"45N SR","dateNeeded":"10/25/2025","status":"Open"},{"id":"tr32","brand":"Samsung","model":"WD90F53AVB","customerName":"South American Export","inventoryId":1660,"requestedBy":"Camila  Calderon ","fromLocation":"PASADE","toLocation":"45N SR","dateNeeded":"10/25/2025","status":"Open"},{"id":"tr33","brand":"Samsung","model":"WD90F53AVS","customerName":"South American Export","inventoryId":1735,"requestedBy":"Camila  Calderon ","fromLocation":"PASADE","toLocation":"45N SR","dateNeeded":"10/25/2025","status":"Open"},{"id":"tr34","brand":"LG","model":"WM8980HVA","customerName":"South American Export","inventoryId":668,"requestedBy":"Camila  Calderon ","fromLocation":"HEMPST","toLocation":"45N SR","dateNeeded":"10/25/2025","status":"Open"},{"id":"tr35","brand":"Frigidaire Professional","model":"PCFG3080AF","customerName":"Mario Mondragon","inventoryId":269,"requestedBy":"Brian Nguyen","fromLocation":"45N SR","toLocation":"HEMPST","dateNeeded":"10/25/2025","status":"Open"},{"id":"tr36","brand":"GE Profile","model":"PFW870SPVRS","customerName":"David Salazar","inventoryId":1822,"requestedBy":"Joseph Alfaro","fromLocation":"CONROE","toLocation":"45WH","dateNeeded":"10/26/2025","status":"Open"},{"id":"tr37","brand":"GE Profile","model":"PFW870SPVRS","customerName":"David Salazar","inventoryId":1822,"requestedBy":"Joseph Alfaro","fromLocation":"CONROE","toLocation":"45WH","dateNeeded":"10/26/2025","status":"Open"},{"id":"tr38","brand":"GE Profile","model":"PFD87GSPVRS","customerName":"David Salazar","inventoryId":1823,"requestedBy":"Joseph Alfaro","fromLocation":"CONROE","toLocation":"45WH","dateNeeded":"10/26/2025","status":"Open"},{"id":"tr39","brand":"Samsung","model":"NX60A6751SS","customerName":"jesus salazar","inventoryId":1969,"requestedBy":"Paola De La Fuente","fromLocation":"CONROE","toLocation":"45WH","dateNeeded":"10/29/2025","status":"Open"},{"id":"tr40","brand":"ZLINE","model":"KB-36","customerName":"Alma Patricia Limon","inventoryId":2307,"requestedBy":"Nicolas Ochoa","fromLocation":"45WH","toLocation":"SPRING","dateNeeded":"11/18/2025","status":"Open"},{"id":"tr41","brand":"Samsung","model":"WA44A3205AW","customerName":"Dan Baker","inventoryId":4176,"requestedBy":"Dontavious Smith","fromLocation":"HWY6","toLocation":"SPRING","dateNeeded":"11/22/2025","status":"Open"}],"inventory":[{"id":"inv5545","inventoryId":5545,"brand":"LG","model":"LRYXC2606S","serial":"5545","cost":667,"price":800,"msrp":1167,"location":"45N SR","status":"Available","condition":"OPEN","category":"Washer","desc":"LG LRYXC2606S","color":"Stainless"},{"id":"inv5546","inventoryId":5546,"brand":"LG","model":"LF24Z6530S","serial":"5546","cost":894,"price":1073,"msrp":1564,"location":"45N SR","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"LG LF24Z6530S","color":"Black"},{"id":"inv5547","inventoryId":5547,"brand":"LG","model":"LF24Z6530S","serial":"5547","cost":1353,"price":1827,"msrp":2368,"location":"45N SR","status":"Available","condition":"NEW","category":"Dishwasher","desc":"LG LF24Z6530S","color":"Slate"},{"id":"inv5548","inventoryId":5548,"brand":"LG","model":"LRFXC2606S","serial":"5548","cost":808,"price":929,"msrp":1414,"location":"45N SR","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"LG LRFXC2606S","color":"White"},{"id":"inv5549","inventoryId":5549,"brand":"LG","model":"LRFXC2606S","serial":"5549","cost":1111,"price":1167,"msrp":1944,"location":"45N SR","status":"Available","condition":"SD-B","category":"Range","desc":"LG LRFXC2606S","color":"White"},{"id":"inv5550","inventoryId":5550,"brand":"LG","model":"LRFXC2606S","serial":"5550","cost":1276,"price":1723,"msrp":2233,"location":"45N SR","status":"Available","condition":"NEW","category":"Dishwasher","desc":"LG LRFXC2606S","color":"White"},{"id":"inv5551","inventoryId":5551,"brand":"LG","model":"LRFXC2606S","serial":"5551","cost":1273,"price":1209,"msrp":2228,"location":"45N SR","status":"Available","condition":"SD-C","category":"Refrigerator","desc":"LG LRFXC2606S","color":"Black"},{"id":"inv5552","inventoryId":5552,"brand":"LG","model":"LRFLC2716S","serial":"5552","cost":1212,"price":1151,"msrp":2121,"location":"45N SR","status":"Available","condition":"SD-C","category":"Dishwasher","desc":"LG LRFLC2716S","color":"Slate"},{"id":"inv5553","inventoryId":5553,"brand":"LG","model":"LRFLC2706S","serial":"5553","cost":991,"price":1140,"msrp":1734,"location":"45N SR","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"LG LRFLC2706S","color":"White"},{"id":"inv5554","inventoryId":5554,"brand":"LG","model":"LHFS28XBS","serial":"5554","cost":814,"price":1099,"msrp":1424,"location":"45N SR","status":"Available","condition":"NEW","category":"Range","desc":"LG LHFS28XBS","color":"White"},{"id":"inv5555","inventoryId":5555,"brand":"LG","model":"LHFS28XBS","serial":"5555","cost":1391,"price":1878,"msrp":2434,"location":"45N SR","status":"Available","condition":"NEW","category":"Dishwasher","desc":"LG LHFS28XBS","color":"White"},{"id":"inv5556","inventoryId":5556,"brand":"LG","model":"LRFLS3206S","serial":"5556","cost":675,"price":911,"msrp":1181,"location":"45N SR","status":"Available","condition":"NEW","category":"Dishwasher","desc":"LG LRFLS3206S","color":"Slate"},{"id":"inv5557","inventoryId":5557,"brand":"LG","model":"LRFCS29D6S","serial":"5557","cost":471,"price":330,"msrp":824,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Dryer","desc":"LG LRFCS29D6S","color":"Stainless"},{"id":"inv5558","inventoryId":5558,"brand":"LG","model":"LRFLS3216S","serial":"5558","cost":1407,"price":1688,"msrp":2462,"location":"45N SR","status":"Available","condition":"OPEN","category":"Dryer","desc":"LG LRFLS3216S","color":"White"},{"id":"inv5559","inventoryId":5559,"brand":"LG","model":"LF25H6200S","serial":"5559","cost":683,"price":785,"msrp":1195,"location":"45N SR","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"LG LF25H6200S","color":"Slate"},{"id":"inv5560","inventoryId":5560,"brand":"LG","model":"LMXS28626S","serial":"5560","cost":883,"price":1192,"msrp":1545,"location":"45N SR","status":"Available","condition":"NEW","category":"Dryer","desc":"LG LMXS28626S","color":"White"},{"id":"inv5561","inventoryId":5561,"brand":"LG","model":"LMXS28626S","serial":"5561","cost":1101,"price":1321,"msrp":1927,"location":"45N SR","status":"Available","condition":"OPEN","category":"Dryer","desc":"LG LMXS28626S","color":"Slate"},{"id":"inv5562","inventoryId":5562,"brand":"LG","model":"LMXS28626S","serial":"5562","cost":1011,"price":1213,"msrp":1769,"location":"45N SR","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"LG LMXS28626S","color":"White"},{"id":"inv5563","inventoryId":5563,"brand":"LG","model":"LRMVC2306D","serial":"5563","cost":809,"price":1092,"msrp":1416,"location":"45N SR","status":"Available","condition":"NEW","category":"Washer","desc":"LG LRMVC2306D","color":"Slate"},{"id":"inv5564","inventoryId":5564,"brand":"LG","model":"LRMDS3006D","serial":"5564","cost":636,"price":604,"msrp":1113,"location":"45N SR","status":"Available","condition":"SD-C","category":"Dishwasher","desc":"LG LRMDS3006D","color":"Slate"},{"id":"inv5533","inventoryId":5533,"brand":"Whirlpool","model":"WTW5010LW","serial":"5533","cost":698,"price":663,"msrp":1222,"location":"SPRING","status":"Available","condition":"SD-C","category":"Dryer","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5535","inventoryId":5535,"brand":"Whirlpool","model":"WTW5010LW","serial":"5535","cost":457,"price":548,"msrp":800,"location":"SPRING","status":"Available","condition":"OPEN","category":"Dryer","desc":"Whirlpool WTW5010LW","color":"White"},{"id":"inv5536","inventoryId":5536,"brand":"Whirlpool","model":"WTW5010LW","serial":"5536","cost":561,"price":673,"msrp":982,"location":"SPRING","status":"Available","condition":"OPEN","category":"Freezer","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5537","inventoryId":5537,"brand":"Whirlpool","model":"WTW5010LW","serial":"5537","cost":1421,"price":1634,"msrp":2487,"location":"SPRING","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5538","inventoryId":5538,"brand":"Whirlpool","model":"WTW5010LW","serial":"5538","cost":1119,"price":783,"msrp":1958,"location":"SPRING","status":"Available","condition":"AS-IS","category":"Freezer","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5539","inventoryId":5539,"brand":"Whirlpool","model":"WTW5010LW","serial":"5539","cost":1456,"price":1383,"msrp":2548,"location":"SPRING","status":"Available","condition":"SD-C","category":"Range","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5540","inventoryId":5540,"brand":"Whirlpool","model":"WTW5010LW","serial":"5540","cost":1243,"price":1429,"msrp":2175,"location":"SPRING","status":"Available","condition":"SD-A","category":"Range","desc":"Whirlpool WTW5010LW","color":"Stainless"},{"id":"inv5541","inventoryId":5541,"brand":"Whirlpool","model":"WTW5010LW","serial":"5541","cost":1326,"price":1525,"msrp":2320,"location":"SPRING","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"Whirlpool WTW5010LW","color":"White"},{"id":"inv5542","inventoryId":5542,"brand":"Whirlpool","model":"WTW5010LW","serial":"5542","cost":539,"price":377,"msrp":943,"location":"SPRING","status":"Available","condition":"AS-IS","category":"Washer","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5543","inventoryId":5543,"brand":"Whirlpool","model":"WTW5010LW","serial":"5543","cost":779,"price":545,"msrp":1363,"location":"SPRING","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5544","inventoryId":5544,"brand":"Whirlpool","model":"WTW5010LW","serial":"5544","cost":599,"price":719,"msrp":1048,"location":"SPRING","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5532","inventoryId":5532,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1118,"price":1062,"msrp":1956,"location":"SPWH","status":"Available","condition":"SD-C","category":"Refrigerator","desc":"Whirlpool WTW5010LW","color":"White"},{"id":"inv5531","inventoryId":5531,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1183,"price":1124,"msrp":2070,"location":"SPWH","status":"Available","condition":"SD-C","category":"Refrigerator","desc":"Whirlpool WTW5010LW","color":"White"},{"id":"inv5530","inventoryId":5530,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1155,"price":1328,"msrp":2021,"location":"SPWH","status":"Available","condition":"SD-A","category":"Range","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5529","inventoryId":5529,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1121,"price":1065,"msrp":1962,"location":"SPWH","status":"Available","condition":"SD-C","category":"Range","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5528","inventoryId":5528,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1432,"price":1647,"msrp":2506,"location":"SPWH","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5527","inventoryId":5527,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1374,"price":1580,"msrp":2404,"location":"SPWH","status":"Available","condition":"SD-A","category":"Range","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5526","inventoryId":5526,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":1409,"price":1691,"msrp":2466,"location":"SPWH","status":"Available","condition":"OPEN","category":"Washer","desc":"Whirlpool WTW5010LW","color":"Stainless"},{"id":"inv5525","inventoryId":5525,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":692,"price":657,"msrp":1211,"location":"SPWH","status":"Available","condition":"SD-C","category":"Dryer","desc":"Whirlpool WTW5010LW","color":"Black"},{"id":"inv5524","inventoryId":5524,"brand":"Whirlpool","model":"WTW5010LW","serial":"WTW5015LW  1","cost":626,"price":720,"msrp":1096,"location":"SPWH","status":"Available","condition":"SD-A","category":"Washer","desc":"Whirlpool WTW5010LW","color":"Slate"},{"id":"inv5352","inventoryId":5352,"brand":"LG Signature","model":"WM9900HSA","serial":"5352","cost":597,"price":687,"msrp":1045,"location":"45WH","status":"Available","condition":"SD-A","category":"Range","desc":"LG Signature WM9900HSA","color":"White"},{"id":"inv5281","inventoryId":5281,"brand":"LG Signature","model":"WM9900HSA","serial":"5281","cost":1238,"price":1176,"msrp":2166,"location":"45WH","status":"Available","condition":"SD-C","category":"Freezer","desc":"LG Signature WM9900HSA","color":"Slate"},{"id":"inv5136","inventoryId":5136,"brand":"KitchenAid","model":"KMBS104ESS","serial":"KMBS104ESS03","cost":869,"price":608,"msrp":1521,"location":"45WH - Sold","status":"Available","condition":"AS-IS","category":"Washer","desc":"KitchenAid KMBS104ESS","color":"Black"},{"id":"inv4922","inventoryId":4922,"brand":"KitchenAid","model":"KBBR306ESS","serial":"KE1206250","cost":1267,"price":1710,"msrp":2217,"location":"45N SR","status":"Available","condition":"NEW","category":"Freezer","desc":"KitchenAid KBBR306ESS","color":"Black"},{"id":"inv4931","inventoryId":4931,"brand":"KitchenAid","model":"KDTM404KPS","serial":"FE1402151","cost":814,"price":936,"msrp":1424,"location":"45N SR","status":"Available","condition":"SD-A","category":"Freezer","desc":"KitchenAid KDTM404KPS","color":"Slate"},{"id":"inv4932","inventoryId":4932,"brand":"KitchenAid","model":"KDTM404KPS","serial":"FW2103452","cost":1438,"price":1941,"msrp":2516,"location":"PASADE","status":"Available","condition":"NEW","category":"Dryer","desc":"KitchenAid KDTM404KPS","color":"Black"},{"id":"inv4945","inventoryId":4945,"brand":"KitchenAid","model":"KDPM604KPS","serial":"FE1801396","cost":955,"price":668,"msrp":1671,"location":"CONROE","status":"Available","condition":"AS-IS","category":"Washer","desc":"KitchenAid KDPM604KPS","color":"Black"},{"id":"inv4952","inventoryId":4952,"brand":"KitchenAid","model":"KMMS130RPS","serial":"TRE2317837","cost":1305,"price":1370,"msrp":2284,"location":"45N SR","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"KitchenAid KMMS130RPS","color":"Black"},{"id":"inv4953","inventoryId":4953,"brand":"KitchenAid","model":"KMMS130RPS","serial":"TRE2619534","cost":862,"price":905,"msrp":1508,"location":"45N SR","status":"Available","condition":"SD-B","category":"Dryer","desc":"KitchenAid KMMS130RPS","color":"Black"},{"id":"inv4967","inventoryId":4967,"brand":"KitchenAid","model":"KDFE204KPS","serial":"FE3101245","cost":583,"price":670,"msrp":1020,"location":"45N SR","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"KitchenAid KDFE204KPS","color":"Slate"},{"id":"inv4402","inventoryId":4402,"brand":"KitchenAid","model":"KDFS424SPS","serial":"4402","cost":1051,"price":1104,"msrp":1839,"location":"45N SR","status":"Available","condition":"SD-B","category":"Range","desc":"KitchenAid KDFS424SPS","color":"Slate"},{"id":"inv4448","inventoryId":4448,"brand":"KitchenAid","model":"KVWB400DSS","serial":"L0250221","cost":626,"price":438,"msrp":1096,"location":"CONROE","status":"Available","condition":"AS-IS","category":"Freezer","desc":"KitchenAid KVWB400DSS","color":"White"},{"id":"inv4417","inventoryId":4417,"brand":"KitchenAid","model":"KRMF706ESS","serial":"4417","cost":738,"price":886,"msrp":1292,"location":"CONROE","status":"Available","condition":"OPEN","category":"Range","desc":"KitchenAid KRMF706ESS","color":"White"},{"id":"inv4562","inventoryId":4562,"brand":"KitchenAid","model":"KRFF577KPS","serial":"KE2905374","cost":529,"price":635,"msrp":926,"location":"45WH","status":"Available","condition":"OPEN","category":"Washer","desc":"KitchenAid KRFF577KPS","color":"White"},{"id":"inv4558","inventoryId":4558,"brand":"KitchenAid","model":"KRFC302ESS","serial":"KE2501617","cost":938,"price":1266,"msrp":1642,"location":"45WH","status":"Available","condition":"NEW","category":"Washer","desc":"KitchenAid KRFC302ESS","color":"Black"},{"id":"inv4452","inventoryId":4452,"brand":"KitchenAid","model":"KOEC530PSS","serial":"4452","cost":490,"price":343,"msrp":858,"location":"PASADE","status":"Available","condition":"AS-IS","category":"Freezer","desc":"KitchenAid KOEC530PSS","color":"White"},{"id":"inv4394","inventoryId":4394,"brand":"KitchenAid","model":"KCED606GSS","serial":"4394","cost":1202,"price":841,"msrp":2104,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Dryer","desc":"KitchenAid KCED606GSS","color":"Slate"},{"id":"inv4451","inventoryId":4451,"brand":"KitchenAid","model":"KOEC527PSS","serial":"4451","cost":722,"price":758,"msrp":1264,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"KitchenAid KOEC527PSS","color":"Black"},{"id":"inv4396","inventoryId":4396,"brand":"KitchenAid","model":"KDTM404KPS","serial":"4396","cost":1173,"price":1114,"msrp":2053,"location":"SPRING","status":"Available","condition":"SD-C","category":"Washer","desc":"KitchenAid KDTM404KPS","color":"Slate"},{"id":"inv4522","inventoryId":4522,"brand":"KitchenAid","model":"KUID308HPS","serial":"UD3803592","cost":968,"price":1162,"msrp":1694,"location":"CONROE","status":"Available","condition":"OPEN","category":"Range","desc":"KitchenAid KUID308HPS","color":"Black"},{"id":"inv4323","inventoryId":4323,"brand":"KitchenAid","model":"KRFC704FBS","serial":"KE1203033","cost":423,"price":444,"msrp":740,"location":"PASADE","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"KitchenAid KRFC704FBS","color":"Slate"},{"id":"inv4324","inventoryId":4324,"brand":"KitchenAid","model":"KRFF577KPS","serial":"KD3212323","cost":1219,"price":1646,"msrp":2133,"location":"PASADE","status":"Available","condition":"NEW","category":"Dryer","desc":"KitchenAid KRFF577KPS","color":"Stainless"},{"id":"inv5326","inventoryId":5326,"brand":"LG Studio","model":"LSIS6338FE","serial":"5326","cost":1365,"price":1570,"msrp":2389,"location":"45WH - Repair Rodney","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"LG Studio LSIS6338FE","color":"Black"},{"id":"inv4845","inventoryId":4845,"brand":"LG Studio","model":"LSWC307ST","serial":"205KMTL0Z217","cost":458,"price":321,"msrp":802,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Freezer","desc":"LG Studio LSWC307ST","color":"Stainless"},{"id":"inv3313","inventoryId":3313,"brand":"LG Studio","model":"CBGS3028S","serial":"303KMYH00234","cost":1212,"price":1273,"msrp":2121,"location":"45N SR","status":"Available","condition":"SD-B","category":"Range","desc":"LG Studio CBGS3028S","color":"White"},{"id":"inv5235","inventoryId":5235,"brand":"Samsung","model":"WF45B6300AP","serial":"5235","cost":1087,"price":1304,"msrp":1902,"location":"45N SR","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"Samsung WF45B6300AP","color":"Black"},{"id":"inv5061","inventoryId":5061,"brand":"Samsung","model":"ME21DG6300SR","serial":"5061","cost":949,"price":902,"msrp":1661,"location":"45N SR","status":"Available","condition":"SD-C","category":"Range","desc":"Samsung ME21DG6300SR","color":"Black"},{"id":"inv5063","inventoryId":5063,"brand":"Samsung","model":"NA36N6555TS","serial":"5063","cost":508,"price":584,"msrp":889,"location":"45N SR","status":"Available","condition":"SD-A","category":"Range","desc":"Samsung NA36N6555TS","color":"White"},{"id":"inv5069","inventoryId":5069,"brand":"Samsung","model":"ME21DG6700SR","serial":"5069","cost":546,"price":655,"msrp":956,"location":"45N SR","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"Samsung ME21DG6700SR","color":"Stainless"},{"id":"inv4341","inventoryId":4341,"brand":"Samsung","model":"DVE45T6000W","serial":"4341","cost":1215,"price":1397,"msrp":2126,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Freezer","desc":"Samsung DVE45T6000W","color":"Black"},{"id":"inv4392","inventoryId":4392,"brand":"Samsung","model":"WD53DBA900HZ","serial":"4392","cost":1039,"price":727,"msrp":1818,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Range","desc":"Samsung WD53DBA900HZ","color":"Black"},{"id":"inv4393","inventoryId":4393,"brand":"Samsung","model":"WD53DBA900HB","serial":"4393","cost":749,"price":899,"msrp":1311,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Dryer","desc":"Samsung WD53DBA900HB","color":"White"},{"id":"inv4364","inventoryId":4364,"brand":"Samsung","model":"RF30BB660012","serial":"4364","cost":707,"price":954,"msrp":1237,"location":"HEMPST","status":"Available","condition":"NEW","category":"Range","desc":"Samsung RF30BB660012","color":"Stainless"},{"id":"inv4124","inventoryId":4124,"brand":"Samsung","model":"NSE6DG8550SR","serial":"4124","cost":893,"price":938,"msrp":1563,"location":"PASADE","status":"Available","condition":"SD-B","category":"Range","desc":"Samsung NSE6DG8550SR","color":"Stainless"},{"id":"inv4352","inventoryId":4352,"brand":"Samsung","model":"DVE45B6300D/A3","serial":"4352","cost":1352,"price":1555,"msrp":2366,"location":"PASADE","status":"Available","condition":"SD-A","category":"Dryer","desc":"Samsung DVE45B6300D/A3","color":"Slate"},{"id":"inv4128","inventoryId":4128,"brand":"Samsung","model":"WF50BG8300AV","serial":"4128","cost":858,"price":601,"msrp":1502,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Dryer","desc":"Samsung WF50BG8300AV","color":"White"},{"id":"inv5165","inventoryId":5165,"brand":"Samsung","model":"WH46DBH100EW","serial":"5165","cost":658,"price":757,"msrp":1152,"location":"45N SR","status":"Available","condition":"SD-A","category":"Range","desc":"Samsung WH46DBH100EW","color":"White"},{"id":"inv4344","inventoryId":4344,"brand":"Samsung","model":"DW90F89P0USR","serial":"4344","cost":867,"price":824,"msrp":1517,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Dishwasher","desc":"Samsung DW90F89P0USR","color":"Slate"},{"id":"inv5163","inventoryId":5163,"brand":"Samsung","model":"WD53DBA900HZ","serial":"5163","cost":540,"price":729,"msrp":945,"location":"HEMPST","status":"Available","condition":"NEW","category":"Range","desc":"Samsung WD53DBA900HZ","color":"Slate"},{"id":"inv4123","inventoryId":4123,"brand":"Samsung","model":"NE63A6511SS","serial":"4123","cost":726,"price":762,"msrp":1270,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Samsung NE63A6511SS","color":"Stainless"},{"id":"inv4384","inventoryId":4384,"brand":"Samsung","model":"WF50BG8300AV","serial":"4384","cost":537,"price":510,"msrp":940,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Dishwasher","desc":"Samsung WF50BG8300AV","color":"White"},{"id":"inv4351","inventoryId":4351,"brand":"Samsung","model":"DVE45B6300W","serial":"4351","cost":912,"price":958,"msrp":1596,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Samsung DVE45B6300W","color":"Black"},{"id":"inv4371","inventoryId":4371,"brand":"Samsung","model":"RS27T5200SR","serial":"4371","cost":1334,"price":934,"msrp":2334,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Dryer","desc":"Samsung RS27T5200SR","color":"Black"},{"id":"inv4340","inventoryId":4340,"brand":"Samsung","model":"DVE45T6000W","serial":"4340","cost":737,"price":700,"msrp":1290,"location":"CONROE","status":"Available","condition":"SD-C","category":"Dryer","desc":"Samsung DVE45T6000W","color":"Slate"},{"id":"inv4087","inventoryId":4087,"brand":"Samsung","model":"DVE45T3200W","serial":"4087","cost":1028,"price":1079,"msrp":1799,"location":"45N SR","status":"Available","condition":"SD-B","category":"Range","desc":"Samsung DVE45T3200W","color":"Black"},{"id":"inv5232","inventoryId":5232,"brand":"GE","model":"GFW550SSN5WW","serial":"5232","cost":846,"price":973,"msrp":1480,"location":"45N SR","status":"Available","condition":"SD-A","category":"Washer","desc":"GE GFW550SSN5WW","color":"Stainless"},{"id":"inv5236","inventoryId":5236,"brand":"GE","model":"GFW550SPR5RS","serial":"5239","cost":1445,"price":1011,"msrp":2529,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Dryer","desc":"GE GFW550SPR5RS","color":"Black"},{"id":"inv5060","inventoryId":5060,"brand":"GE","model":"GSS25GMPES","serial":"5060","cost":1492,"price":1044,"msrp":2611,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Range","desc":"GE GSS25GMPES","color":"Black"},{"id":"inv5000","inventoryId":5000,"brand":"GE","model":"GFD55ESPRRS","serial":"500","cost":483,"price":580,"msrp":845,"location":"45WH - Sold","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"GE GFD55ESPRRS","color":"Slate"},{"id":"inv5001","inventoryId":5001,"brand":"GE","model":"GFW550SPRRS","serial":"5001","cost":980,"price":686,"msrp":1715,"location":"45WH - Sold","status":"Available","condition":"AS-IS","category":"Freezer","desc":"GE GFW550SPRRS","color":"Stainless"},{"id":"inv5253","inventoryId":5253,"brand":"GE","model":"GFW550SSN5WW","serial":"5253","cost":1268,"price":1712,"msrp":2219,"location":"45WH","status":"Available","condition":"NEW","category":"Range","desc":"GE GFW550SSN5WW","color":"Stainless"},{"id":"inv4994","inventoryId":4994,"brand":"GE","model":"GG30T08BXR","serial":"4994","cost":854,"price":1025,"msrp":1494,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Range","desc":"GE GG30T08BXR","color":"Slate"},{"id":"inv4852","inventoryId":4852,"brand":"GE","model":"JP3030SWSS","serial":"10986","cost":641,"price":449,"msrp":1122,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Freezer","desc":"GE JP3030SWSS","color":"Black"},{"id":"inv4855","inventoryId":4855,"brand":"GE","model":"JP3030SWSS","serial":"10987","cost":1358,"price":1290,"msrp":2376,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Freezer","desc":"GE JP3030SWSS","color":"Black"},{"id":"inv4856","inventoryId":4856,"brand":"GE","model":"JP3030SWSS","serial":"109388","cost":817,"price":572,"msrp":1430,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"GE JP3030SWSS","color":"Stainless"},{"id":"inv4824","inventoryId":4824,"brand":"GE","model":"GDT670SGVWW","serial":"TZ831230B","cost":721,"price":505,"msrp":1262,"location":"CONROE","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"GE GDT670SGVWW","color":"Black"},{"id":"inv4826","inventoryId":4826,"brand":"GE","model":"GDT630PGRWW","serial":"GZ824519B","cost":663,"price":895,"msrp":1160,"location":"CONROE","status":"Available","condition":"NEW","category":"Freezer","desc":"GE GDT630PGRWW","color":"Black"},{"id":"inv4771","inventoryId":4771,"brand":"GE","model":"JGBS66REKSS","serial":"TA406767","cost":1227,"price":1166,"msrp":2147,"location":"PASADE","status":"Available","condition":"SD-C","category":"Dryer","desc":"GE JGBS66REKSS","color":"Stainless"},{"id":"inv4772","inventoryId":4772,"brand":"GE","model":"JGBS66REKSS","serial":"TA406688","cost":1060,"price":1272,"msrp":1855,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"GE JGBS66REKSS","color":"Black"},{"id":"inv4773","inventoryId":4773,"brand":"GE","model":"JGBS66REKSS","serial":"ta406758","cost":1306,"price":1241,"msrp":2286,"location":"45N SR","status":"Available","condition":"SD-C","category":"Dryer","desc":"GE JGBS66REKSS","color":"Stainless"},{"id":"inv4774","inventoryId":4774,"brand":"GE","model":"JGBS66REKSS","serial":"TA406751","cost":1385,"price":1593,"msrp":2424,"location":"45WH","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"GE JGBS66REKSS","color":"Black"},{"id":"inv4776","inventoryId":4776,"brand":"GE","model":"JGBS66REKSS","serial":"ta406623","cost":857,"price":900,"msrp":1500,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"GE JGBS66REKSS","color":"White"},{"id":"inv4775","inventoryId":4775,"brand":"GE","model":"JGBS66REKSS","serial":"TA406683","cost":1205,"price":1386,"msrp":2109,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"GE JGBS66REKSS","color":"Stainless"},{"id":"inv4769","inventoryId":4769,"brand":"GE","model":"JGBS66REKSS","serial":"TA406705","cost":474,"price":498,"msrp":830,"location":"PASADE","status":"Available","condition":"SD-B","category":"Washer","desc":"GE JGBS66REKSS","color":"Black"},{"id":"inv4770","inventoryId":4770,"brand":"GE","model":"JGBS66REKSS","serial":"TA406755","cost":804,"price":764,"msrp":1407,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Freezer","desc":"GE JGBS66REKSS","color":"Stainless"},{"id":"inv5237","inventoryId":5237,"brand":"Maytag","model":"MED6200KW","serial":"5237","cost":937,"price":1078,"msrp":1640,"location":"45N SR","status":"Available","condition":"SD-A","category":"Washer","desc":"Maytag MED6200KW","color":"Black"},{"id":"inv4410","inventoryId":4410,"brand":"Maytag","model":"MED4500MW","serial":"4410","cost":920,"price":874,"msrp":1610,"location":"45N SR","status":"Available","condition":"SD-C","category":"Range","desc":"Maytag MED4500MW","color":"Slate"},{"id":"inv5162","inventoryId":5162,"brand":"Maytag","model":"MED5430PBK","serial":"5162","cost":818,"price":573,"msrp":1432,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Range","desc":"Maytag MED5430PBK","color":"White"},{"id":"inv4978","inventoryId":4978,"brand":"Maytag","model":"MZC5216LW","serial":"SBD5006596","cost":1181,"price":1240,"msrp":2067,"location":"45N SR","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Maytag MZC5216LW","color":"White"},{"id":"inv4926","inventoryId":4926,"brand":"Maytag","model":"MED4500MW","serial":"ME3246889","cost":928,"price":650,"msrp":1624,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Dryer","desc":"Maytag MED4500MW","color":"White"},{"id":"inv4927","inventoryId":4927,"brand":"Maytag","model":"MED4500MW","serial":"ME3143417","cost":918,"price":1239,"msrp":1606,"location":"45N SR","status":"Available","condition":"NEW","category":"Refrigerator","desc":"Maytag MED4500MW","color":"Stainless"},{"id":"inv4928","inventoryId":4928,"brand":"Maytag","model":"MED4500MW","serial":"ME3247945","cost":707,"price":742,"msrp":1237,"location":"45N SR","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Maytag MED4500MW","color":"Slate"},{"id":"inv4929","inventoryId":4929,"brand":"Maytag","model":"MED4500MW","serial":"ME3243820","cost":1407,"price":1337,"msrp":2462,"location":"CONROE","status":"Available","condition":"SD-C","category":"Dryer","desc":"Maytag MED4500MW","color":"Stainless"},{"id":"inv4946","inventoryId":4946,"brand":"Maytag","model":"MVW6500MBK","serial":"CE3400052","cost":807,"price":928,"msrp":1412,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"Maytag MVW6500MBK","color":"White"},{"id":"inv4947","inventoryId":4947,"brand":"Maytag","model":"MHW6630HC","serial":"CE2100017","cost":1120,"price":1064,"msrp":1960,"location":"45WH","status":"Available","condition":"SD-C","category":"Range","desc":"Maytag MHW6630HC","color":"Stainless"},{"id":"inv4950","inventoryId":4950,"brand":"Maytag","model":"MVW6230HW","serial":"CE0800363","cost":799,"price":839,"msrp":1398,"location":"45N SR","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Maytag MVW6230HW","color":"Stainless"},{"id":"inv4954","inventoryId":4954,"brand":"Maytag","model":"MVW6200KW","serial":"CE3000656","cost":1266,"price":1709,"msrp":2216,"location":"45N SR","status":"Available","condition":"NEW","category":"Freezer","desc":"Maytag MVW6200KW","color":"Black"},{"id":"inv4955","inventoryId":4955,"brand":"Maytag","model":"MVW5430MW","serial":"CE2200442","cost":892,"price":937,"msrp":1561,"location":"CONROE","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Maytag MVW5430MW","color":"Stainless"},{"id":"inv4411","inventoryId":4411,"brand":"Maytag","model":"MBF2258FEZ","serial":"4411","cost":467,"price":560,"msrp":817,"location":"CONROE","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"Maytag MBF2258FEZ","color":"White"},{"id":"inv4325","inventoryId":4325,"brand":"Maytag","model":"MRT711SMFZ","serial":"VSE2872228","cost":1369,"price":1437,"msrp":2396,"location":"PASADE","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Maytag MRT711SMFZ","color":"White"},{"id":"inv4311","inventoryId":4311,"brand":"Maytag","model":"MZF34X20DW","serial":"UD4507330","cost":744,"price":521,"msrp":1302,"location":"PASADE","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"Maytag MZF34X20DW","color":"Slate"},{"id":"inv3328","inventoryId":3328,"brand":"Maytag","model":"MHW8630HW","serial":"CE1300154","cost":973,"price":1022,"msrp":1703,"location":"SPRING","status":"Available","condition":"SD-B","category":"Washer","desc":"Maytag MHW8630HW","color":"White"},{"id":"inv3329","inventoryId":3329,"brand":"Maytag","model":"MFW7020RF0","serial":"CE1900757","cost":406,"price":426,"msrp":710,"location":"SPRING","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Maytag MFW7020RF0","color":"Slate"},{"id":"inv3131","inventoryId":3131,"brand":"Maytag","model":"MMMF6030PW","serial":"TRC2510843","cost":667,"price":700,"msrp":1167,"location":"45N SR","status":"Available","condition":"SD-B","category":"Washer","desc":"Maytag MMMF6030PW","color":"Stainless"},{"id":"inv3132","inventoryId":3132,"brand":"Maytag","model":"MVW6500MBK","serial":"CE3600143","cost":1283,"price":1540,"msrp":2245,"location":"PASADE","status":"Available","condition":"OPEN","category":"Range","desc":"Maytag MVW6500MBK","color":"White"},{"id":"inv5062","inventoryId":5062,"brand":"Frigidaire","model":"FFGC3612TS","serial":"5062","cost":801,"price":561,"msrp":1402,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Washer","desc":"Frigidaire FFGC3612TS","color":"Black"},{"id":"inv5113","inventoryId":5113,"brand":"Frigidaire","model":"FFEC3625UB","serial":"5113","cost":630,"price":598,"msrp":1102,"location":"45N SR","status":"Available","condition":"SD-C","category":"Freezer","desc":"Frigidaire FFEC3625UB","color":"Stainless"},{"id":"inv5031","inventoryId":5031,"brand":"Frigidaire","model":"GMOS1964AF","serial":"KG45105478","cost":1371,"price":1577,"msrp":2399,"location":"PASADE","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"Frigidaire GMOS1964AF","color":"White"},{"id":"inv5032","inventoryId":5032,"brand":"Frigidaire","model":"FGMV17WNVF","serial":"KG10413383","cost":818,"price":1104,"msrp":1432,"location":"PASADE","status":"Available","condition":"NEW","category":"Refrigerator","desc":"Frigidaire FGMV17WNVF","color":"Stainless"},{"id":"inv4853","inventoryId":4853,"brand":"Frigidaire","model":"FFGC3612TS","serial":"3F80404038","cost":1142,"price":1085,"msrp":1998,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Range","desc":"Frigidaire FFGC3612TS","color":"Slate"},{"id":"inv4857","inventoryId":4857,"brand":"Frigidaire","model":"FFGC3612TS","serial":"3F80404037","cost":439,"price":307,"msrp":768,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Dishwasher","desc":"Frigidaire FFGC3612TS","color":"Stainless"},{"id":"inv4860","inventoryId":4860,"brand":"Frigidaire","model":"FRFC2323AS","serial":"4A51614705","cost":966,"price":1159,"msrp":1690,"location":"SPRING","status":"Available","condition":"OPEN","category":"Dryer","desc":"Frigidaire FRFC2323AS","color":"White"},{"id":"inv4861","inventoryId":4861,"brand":"Frigidaire","model":"FRFG1723AV","serial":"1K52072601","cost":1111,"price":1500,"msrp":1944,"location":"45N SR","status":"Available","condition":"NEW","category":"Freezer","desc":"Frigidaire FRFG1723AV","color":"White"},{"id":"inv4862","inventoryId":4862,"brand":"Frigidaire","model":"FRFG1723AV","serial":"1K52072603","cost":455,"price":432,"msrp":796,"location":"45N SR","status":"Available","condition":"SD-C","category":"Refrigerator","desc":"Frigidaire FRFG1723AV","color":"White"},{"id":"inv4863","inventoryId":4863,"brand":"Frigidaire","model":"FRFG1723AV","serial":"1K5209152","cost":580,"price":783,"msrp":1015,"location":"45N SR","status":"Available","condition":"NEW","category":"Dryer","desc":"Frigidaire FRFG1723AV","color":"Slate"},{"id":"inv4864","inventoryId":4864,"brand":"Frigidaire","model":"FRFG1723AV","serial":"1K52473880","cost":750,"price":525,"msrp":1312,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"Frigidaire FRFG1723AV","color":"White"},{"id":"inv4865","inventoryId":4865,"brand":"Frigidaire","model":"FRFN2813AF","serial":"4A51421560","cost":419,"price":398,"msrp":733,"location":"45N SR","status":"Available","condition":"SD-C","category":"Freezer","desc":"Frigidaire FRFN2813AF","color":"Black"},{"id":"inv4866","inventoryId":4866,"brand":"Frigidaire","model":"FRFN2813AF","serial":"4A52503820","cost":1244,"price":1306,"msrp":2177,"location":"CONROE","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Frigidaire FRFN2813AF","color":"Black"},{"id":"inv4867","inventoryId":4867,"brand":"Frigidaire","model":"FRFN2813AF","serial":"4A5273013","cost":1429,"price":1500,"msrp":2501,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Freezer","desc":"Frigidaire FRFN2813AF","color":"White"},{"id":"inv4868","inventoryId":4868,"brand":"Frigidaire","model":"FRFN2813AF","serial":"4A52703402","cost":796,"price":756,"msrp":1393,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Range","desc":"Frigidaire FRFN2813AF","color":"Slate"},{"id":"inv4869","inventoryId":4869,"brand":"Frigidaire","model":"FRSC2333AS","serial":"4A51917577","cost":820,"price":779,"msrp":1435,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Refrigerator","desc":"Frigidaire FRSC2333AS","color":"Black"},{"id":"inv4870","inventoryId":4870,"brand":"Frigidaire","model":"FRSC2333AS","serial":"4A52815051","cost":1416,"price":1699,"msrp":2478,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"Frigidaire FRSC2333AS","color":"White"},{"id":"inv4871","inventoryId":4871,"brand":"Frigidaire","model":"FRSG2115AV","serial":"8A52403095","cost":1025,"price":1230,"msrp":1794,"location":"CONROE","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"Frigidaire FRSG2115AV","color":"Stainless"},{"id":"inv4872","inventoryId":4872,"brand":"Frigidaire","model":"FRSS2323AS","serial":"4A43115719","cost":1331,"price":1264,"msrp":2329,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Dishwasher","desc":"Frigidaire FRSS2323AS","color":"Black"},{"id":"inv4873","inventoryId":4873,"brand":"Frigidaire","model":"FRSS2323AS","serial":"4A52000097","cost":1231,"price":1293,"msrp":2154,"location":"45N SR","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Frigidaire FRSS2323AS","color":"White"},{"id":"inv5065","inventoryId":5065,"brand":"Frigidaire Gallery","model":"GCCG3048AS","serial":"5065","cost":456,"price":616,"msrp":798,"location":"45N SR","status":"Available","condition":"NEW","category":"Dishwasher","desc":"Frigidaire Gallery GCCG3048AS","color":"Stainless"},{"id":"inv4854","inventoryId":4854,"brand":"Frigidaire Gallery","model":"GCCG3048AS","serial":"1F44291147","cost":832,"price":957,"msrp":1456,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Range","desc":"Frigidaire Gallery GCCG3048AS","color":"Black"},{"id":"inv4883","inventoryId":4883,"brand":"Frigidaire Gallery","model":"GRFN2023AF","serial":"1K51083754","cost":466,"price":443,"msrp":816,"location":"45N SR","status":"Available","condition":"SD-C","category":"Refrigerator","desc":"Frigidaire Gallery GRFN2023AF","color":"Black"},{"id":"inv4884","inventoryId":4884,"brand":"Frigidaire Gallery","model":"GRFN2023AF","serial":"1K52381027","cost":606,"price":818,"msrp":1060,"location":"HEMPST","status":"Available","condition":"NEW","category":"Washer","desc":"Frigidaire Gallery GRFN2023AF","color":"Slate"},{"id":"inv4885","inventoryId":4885,"brand":"Frigidaire Gallery","model":"GRFS2853AF","serial":"4A52207299","cost":1017,"price":966,"msrp":1780,"location":"SPRING","status":"Available","condition":"SD-C","category":"Washer","desc":"Frigidaire Gallery GRFS2853AF","color":"White"},{"id":"inv4886","inventoryId":4886,"brand":"Frigidaire Gallery","model":"GRFS2853AF","serial":"4A52207947","cost":677,"price":812,"msrp":1185,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Dryer","desc":"Frigidaire Gallery GRFS2853AF","color":"Black"},{"id":"inv4887","inventoryId":4887,"brand":"Frigidaire Gallery","model":"GRMC2273CF","serial":"1K51782451","cost":610,"price":427,"msrp":1068,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Range","desc":"Frigidaire Gallery GRMC2273CF","color":"White"},{"id":"inv4888","inventoryId":4888,"brand":"Frigidaire Gallery","model":"GRMN2872AF","serial":"1K52481609","cost":1156,"price":1329,"msrp":2023,"location":"CONROE","status":"Available","condition":"SD-A","category":"Freezer","desc":"Frigidaire Gallery GRMN2872AF","color":"Slate"},{"id":"inv4889","inventoryId":4889,"brand":"Frigidaire Gallery","model":"GRQC2255BF","serial":"1K52174843","cost":1314,"price":1774,"msrp":2300,"location":"HEMPST","status":"Available","condition":"NEW","category":"Refrigerator","desc":"Frigidaire Gallery GRQC2255BF","color":"White"},{"id":"inv4893","inventoryId":4893,"brand":"Frigidaire Gallery","model":"GRSN2620AF","serial":"4A53104737","cost":889,"price":1067,"msrp":1556,"location":"45N SR","status":"Available","condition":"OPEN","category":"Range","desc":"Frigidaire Gallery GRSN2620AF","color":"Black"},{"id":"inv4842","inventoryId":4842,"brand":"Frigidaire Gallery","model":"GCWS2767AF","serial":"VF31817170","cost":1177,"price":1412,"msrp":2060,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Range","desc":"Frigidaire Gallery GCWS2767AF","color":"Black"},{"id":"inv4844","inventoryId":4844,"brand":"Frigidaire Gallery","model":"FGEW3066UF","serial":"AF14901133X","cost":1444,"price":1661,"msrp":2527,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Washer","desc":"Frigidaire Gallery FGEW3066UF","color":"Slate"},{"id":"inv4468","inventoryId":4468,"brand":"Frigidaire Gallery","model":"GHWQ085WD1","serial":"WK31405765","cost":902,"price":1218,"msrp":1578,"location":"PASADE","status":"Available","condition":"NEW","category":"Washer","desc":"Frigidaire Gallery GHWQ085WD1","color":"Stainless"},{"id":"inv4469","inventoryId":4469,"brand":"Frigidaire Gallery","model":"GHWQ085WD1","serial":"WK31405575","cost":1404,"price":1615,"msrp":2457,"location":"PASADE","status":"Available","condition":"SD-A","category":"Freezer","desc":"Frigidaire Gallery GHWQ085WD1","color":"Stainless"},{"id":"inv4470","inventoryId":4470,"brand":"Frigidaire Gallery","model":"GHWQ085WD1","serial":"WK31404699","cost":1155,"price":808,"msrp":2021,"location":"PASADE","status":"Available","condition":"AS-IS","category":"Washer","desc":"Frigidaire Gallery GHWQ085WD1","color":"Stainless"},{"id":"inv4315","inventoryId":4315,"brand":"Frigidaire Gallery","model":"GCWS27B67AFE","serial":"VF33G114374","cost":1145,"price":1202,"msrp":2004,"location":"PASADE","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Frigidaire Gallery GCWS27B67AFE","color":"Black"},{"id":"inv5066","inventoryId":5066,"brand":"ZLINE","model":"RCIND-30","serial":"5066","cost":1148,"price":1320,"msrp":2009,"location":"45N SR","status":"Available","condition":"SD-A","category":"Freezer","desc":"ZLINE RCIND-30","color":"Black"},{"id":"inv5067","inventoryId":5067,"brand":"ZLINE","model":"RCIND-30","serial":"5067","cost":688,"price":826,"msrp":1204,"location":"45N SR","status":"Available","condition":"OPEN","category":"Washer","desc":"ZLINE RCIND-30","color":"Black"},{"id":"inv4898","inventoryId":4898,"brand":"ZLINE","model":"695-34","serial":"nan","cost":615,"price":430,"msrp":1076,"location":"45WH - Sold","status":"Available","condition":"AS-IS","category":"Dishwasher","desc":"ZLINE 695-34","color":"Black"},{"id":"inv4917","inventoryId":4917,"brand":"ZLINE","model":"RTS-36","serial":"4917","cost":681,"price":477,"msrp":1192,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Washer","desc":"ZLINE RTS-36","color":"Slate"},{"id":"inv4847","inventoryId":4847,"brand":"ZLINE","model":"RC36","serial":"4847","cost":1286,"price":1222,"msrp":2250,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Washer","desc":"ZLINE RC36","color":"Stainless"},{"id":"inv4850","inventoryId":4850,"brand":"ZLINE","model":"RC36","serial":"4850","cost":1253,"price":1190,"msrp":2193,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Freezer","desc":"ZLINE RC36","color":"Black"},{"id":"inv4858","inventoryId":4858,"brand":"ZLINE","model":"RG30","serial":"GA22003","cost":1217,"price":1400,"msrp":2130,"location":"PASADE","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"ZLINE RG30","color":"Slate"},{"id":"inv4668","inventoryId":4668,"brand":"ZLINE","model":"RBVZ-US-24-CB","serial":"4668","cost":1463,"price":1975,"msrp":2560,"location":"45WH","status":"Available","condition":"NEW","category":"Freezer","desc":"ZLINE RBVZ-US-24-CB","color":"Slate"},{"id":"inv4669","inventoryId":4669,"brand":"ZLINE","model":"RBVZ-US-24-CB","serial":"4669","cost":1329,"price":1395,"msrp":2326,"location":"45WH","status":"Available","condition":"SD-B","category":"Washer","desc":"ZLINE RBVZ-US-24-CB","color":"Black"},{"id":"inv4672","inventoryId":4672,"brand":"ZLINE","model":"RBSO-GS-24","serial":"4672","cost":659,"price":791,"msrp":1153,"location":"45WH","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"ZLINE RBSO-GS-24","color":"Slate"},{"id":"inv4673","inventoryId":4673,"brand":"ZLINE","model":"KB-30","serial":"4673","cost":752,"price":714,"msrp":1316,"location":"45WH","status":"Available","condition":"SD-C","category":"Freezer","desc":"ZLINE KB-30","color":"Slate"},{"id":"inv4674","inventoryId":4674,"brand":"ZLINE","model":"KB-30","serial":"4674","cost":1470,"price":1764,"msrp":2572,"location":"45WH","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"ZLINE KB-30","color":"Black"},{"id":"inv4675","inventoryId":4675,"brand":"ZLINE","model":"KB-30","serial":"4675","cost":1445,"price":1734,"msrp":2529,"location":"45WH","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"ZLINE KB-30","color":"Black"},{"id":"inv4678","inventoryId":4678,"brand":"ZLINE","model":"SGR30","serial":"4678","cost":771,"price":887,"msrp":1349,"location":"45WH","status":"Available","condition":"SD-A","category":"Washer","desc":"ZLINE SGR30","color":"Stainless"},{"id":"inv4679","inventoryId":4679,"brand":"ZLINE","model":"SGR30","serial":"4679","cost":1285,"price":1349,"msrp":2249,"location":"45WH","status":"Available","condition":"SD-B","category":"Washer","desc":"ZLINE SGR30","color":"White"},{"id":"inv4680","inventoryId":4680,"brand":"ZLINE","model":"RA-GR-30","serial":"4680","cost":1442,"price":1658,"msrp":2524,"location":"45WH","status":"Available","condition":"SD-A","category":"Refrigerator","desc":"ZLINE RA-GR-30","color":"White"},{"id":"inv4681","inventoryId":4681,"brand":"ZLINE","model":"RAZ-30-CB","serial":"4681","cost":1234,"price":1666,"msrp":2160,"location":"45N SR","status":"Available","condition":"NEW","category":"Washer","desc":"ZLINE RAZ-30-CB","color":"Stainless"},{"id":"inv4682","inventoryId":4682,"brand":"ZLINE","model":"RAZ-30-CB","serial":"4682","cost":685,"price":651,"msrp":1199,"location":"45WH","status":"Available","condition":"SD-C","category":"Washer","desc":"ZLINE RAZ-30-CB","color":"White"},{"id":"inv4683","inventoryId":4683,"brand":"ZLINE","model":"MWO-OTRCFH-30","serial":"4683","cost":986,"price":1183,"msrp":1726,"location":"45N SR","status":"Available","condition":"OPEN","category":"Range","desc":"ZLINE MWO-OTRCFH-30","color":"White"},{"id":"inv4684","inventoryId":4684,"brand":"ZLINE","model":"MWO-OTRCFH-30","serial":"4684","cost":799,"price":919,"msrp":1398,"location":"45WH","status":"Available","condition":"SD-A","category":"Range","desc":"ZLINE MWO-OTRCFH-30","color":"Stainless"},{"id":"inv5068","inventoryId":5068,"brand":"Bosch","model":"NGM3050UC","serial":"5068","cost":1195,"price":1374,"msrp":2091,"location":"45N SR","status":"Available","condition":"SD-A","category":"Range","desc":"Bosch NGM3050UC","color":"Stainless"},{"id":"inv4843","inventoryId":4843,"brand":"Bosch","model":"HBN8651UC","serial":"020300073","cost":851,"price":979,"msrp":1489,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Washer","desc":"Bosch HBN8651UC","color":"White"},{"id":"inv4805","inventoryId":4805,"brand":"Bosch","model":"HMV3053U","serial":"0211162124","cost":1318,"price":1384,"msrp":2306,"location":"PASADE","status":"Available","condition":"SD-B","category":"Range","desc":"Bosch HMV3053U","color":"Black"},{"id":"inv4806","inventoryId":4806,"brand":"Bosch","model":"NGM8059UC","serial":"824120545512000742","cost":1459,"price":1532,"msrp":2553,"location":"CONROE","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Bosch NGM8059UC","color":"Slate"},{"id":"inv4308","inventoryId":4308,"brand":"Bosch","model":"B36FD10ENS","serial":"0412","cost":833,"price":583,"msrp":1458,"location":"PASADE","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"Bosch B36FD10ENS","color":"Black"},{"id":"inv4316","inventoryId":4316,"brand":"Bosch","model":"HBN8651UC","serial":"0205001167","cost":1127,"price":1183,"msrp":1972,"location":"PASADE","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Bosch HBN8651UC","color":"Slate"},{"id":"inv5309","inventoryId":5309,"brand":"Happy Homes","model":"DUBAI 3PC Black","serial":"5309","cost":659,"price":461,"msrp":1153,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Freezer","desc":"Happy Homes DUBAI 3PC Black","color":"Slate"},{"id":"inv5272","inventoryId":5272,"brand":"Happy Homes","model":"DIAMOND9","serial":"5272","cost":1468,"price":1982,"msrp":2569,"location":"HEMPST","status":"Available","condition":"NEW","category":"Refrigerator","desc":"Happy Homes DIAMOND9","color":"Slate"},{"id":"inv5242","inventoryId":5242,"brand":"Happy Homes","model":"GOLD9","serial":"5242","cost":831,"price":789,"msrp":1454,"location":"45N SR","status":"Available","condition":"SD-C","category":"Freezer","desc":"Happy Homes GOLD9","color":"Black"},{"id":"inv5229","inventoryId":5229,"brand":"Happy Homes","model":"D2800 Dining Table","serial":"5229","cost":903,"price":948,"msrp":1580,"location":"45N SR","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Happy Homes D2800 Dining Table","color":"Stainless"},{"id":"inv5230","inventoryId":5230,"brand":"Happy Homes","model":"Queen BS","serial":"5230","cost":1008,"price":958,"msrp":1764,"location":"45N SR","status":"Available","condition":"SD-C","category":"Freezer","desc":"Happy Homes Queen BS","color":"Slate"},{"id":"inv5231","inventoryId":5231,"brand":"Happy Homes","model":"Queen BS","serial":"5231","cost":614,"price":430,"msrp":1074,"location":"45N SR","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"Happy Homes Queen BS","color":"White"},{"id":"inv5205","inventoryId":5205,"brand":"Happy Homes","model":"ICETECH - 10  TWIN","serial":"5205","cost":911,"price":1230,"msrp":1594,"location":"45N SR","status":"Available","condition":"NEW","category":"Washer","desc":"Happy Homes ICETECH - 10  TWIN","color":"White"},{"id":"inv5206","inventoryId":5206,"brand":"Happy Homes","model":"Comfort Firm K","serial":"5206","cost":515,"price":592,"msrp":901,"location":"45N SR","status":"Available","condition":"SD-A","category":"Freezer","desc":"Happy Homes Comfort Firm K","color":"Black"},{"id":"inv5218","inventoryId":5218,"brand":"Happy Homes","model":"ICETECH - 10  TWIN","serial":"5218","cost":812,"price":1096,"msrp":1421,"location":"45N SR","status":"Available","condition":"NEW","category":"Dishwasher","desc":"Happy Homes ICETECH - 10  TWIN","color":"White"},{"id":"inv5219","inventoryId":5219,"brand":"Happy Homes","model":"Comfort Firm K","serial":"5219","cost":622,"price":746,"msrp":1088,"location":"45N SR","status":"Available","condition":"OPEN","category":"Washer","desc":"Happy Homes Comfort Firm K","color":"White"},{"id":"inv5175","inventoryId":5175,"brand":"Happy Homes","model":"HH","serial":"5175","cost":780,"price":897,"msrp":1365,"location":"45N SR","status":"Available","condition":"SD-A","category":"Freezer","desc":"Happy Homes HH","color":"Black"},{"id":"inv5034","inventoryId":5034,"brand":"Happy Homes","model":"F0002874","serial":"5034","cost":1317,"price":922,"msrp":2305,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Washer","desc":"Happy Homes F0002874","color":"White"},{"id":"inv5027","inventoryId":5027,"brand":"Happy Homes","model":"950 Fog Platform Bed","serial":"5027","cost":447,"price":469,"msrp":782,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Happy Homes 950 Fog Platform Bed","color":"Slate"},{"id":"inv5025","inventoryId":5025,"brand":"Happy Homes","model":"F0002905","serial":"5025","cost":588,"price":617,"msrp":1029,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Washer","desc":"Happy Homes F0002905","color":"Slate"},{"id":"inv4981","inventoryId":4981,"brand":"Happy Homes","model":"F0003515","serial":"4981","cost":787,"price":1062,"msrp":1377,"location":"HEMPST","status":"Available","condition":"NEW","category":"Freezer","desc":"Happy Homes F0003515","color":"Black"},{"id":"inv4980","inventoryId":4980,"brand":"Happy Homes","model":"D2020","serial":"F0002996","cost":653,"price":882,"msrp":1143,"location":"HEMPST","status":"Available","condition":"NEW","category":"Freezer","desc":"Happy Homes D2020","color":"Slate"},{"id":"inv4972","inventoryId":4972,"brand":"Happy Homes","model":"0000","serial":"F0003416","cost":1338,"price":1539,"msrp":2342,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"Happy Homes 0000","color":"Slate"},{"id":"inv4920","inventoryId":4920,"brand":"Happy Homes","model":"F0002846","serial":"4920","cost":1080,"price":756,"msrp":1890,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Dryer","desc":"Happy Homes F0002846","color":"White"},{"id":"inv4918","inventoryId":4918,"brand":"Happy Homes","model":"F0004007","serial":"4918","cost":590,"price":708,"msrp":1032,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Freezer","desc":"Happy Homes F0004007","color":"Slate"},{"id":"inv4913","inventoryId":4913,"brand":"Happy Homes","model":"F0003197","serial":"4913","cost":947,"price":994,"msrp":1657,"location":"45N SR","status":"Available","condition":"SD-B","category":"Range","desc":"Happy Homes F0003197","color":"Black"},{"id":"inv5254","inventoryId":5254,"brand":"Sealy","model":"Queen Box Spring","serial":"5254","cost":870,"price":609,"msrp":1522,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Washer","desc":"Sealy Queen Box Spring","color":"Slate"},{"id":"inv5255","inventoryId":5255,"brand":"Sealy","model":"Queen Box Spring","serial":"5255","cost":765,"price":803,"msrp":1339,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dryer","desc":"Sealy Queen Box Spring","color":"Slate"},{"id":"inv5256","inventoryId":5256,"brand":"Sealy","model":"Queen Box Spring","serial":"5256","cost":1264,"price":1327,"msrp":2212,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Sealy Queen Box Spring","color":"Stainless"},{"id":"inv5257","inventoryId":5257,"brand":"Sealy","model":"Queen Box Spring","serial":"5257","cost":1197,"price":1616,"msrp":2095,"location":"HEMPST","status":"Available","condition":"NEW","category":"Dryer","desc":"Sealy Queen Box Spring","color":"Stainless"},{"id":"inv5258","inventoryId":5258,"brand":"Sealy","model":"Queen Box Spring","serial":"5258","cost":1069,"price":1229,"msrp":1871,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Freezer","desc":"Sealy Queen Box Spring","color":"Black"},{"id":"inv5259","inventoryId":5259,"brand":"Sealy","model":"OPAL","serial":"5259","cost":1230,"price":1660,"msrp":2152,"location":"HEMPST","status":"Available","condition":"NEW","category":"Refrigerator","desc":"Sealy OPAL","color":"Stainless"},{"id":"inv5260","inventoryId":5260,"brand":"Sealy","model":"OPAL","serial":"5260","cost":1472,"price":1693,"msrp":2576,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Dishwasher","desc":"Sealy OPAL","color":"Black"},{"id":"inv5261","inventoryId":5261,"brand":"Sealy","model":"Paterson","serial":"5261","cost":1324,"price":1589,"msrp":2317,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Washer","desc":"Sealy Paterson","color":"Slate"},{"id":"inv5262","inventoryId":5262,"brand":"Sealy","model":"Paterson","serial":"5262","cost":583,"price":408,"msrp":1020,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Washer","desc":"Sealy Paterson","color":"White"},{"id":"inv5263","inventoryId":5263,"brand":"Sealy","model":"Paterson","serial":"5263","cost":688,"price":791,"msrp":1204,"location":"HEMPST","status":"Available","condition":"SD-A","category":"Range","desc":"Sealy Paterson","color":"White"},{"id":"inv5264","inventoryId":5264,"brand":"Sealy","model":"Paterson","serial":"5264","cost":1045,"price":993,"msrp":1829,"location":"HEMPST","status":"Available","condition":"SD-C","category":"Dryer","desc":"Sealy Paterson","color":"Black"},{"id":"inv5265","inventoryId":5265,"brand":"Sealy","model":"Remington Soft","serial":"5265","cost":1199,"price":1259,"msrp":2098,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Refrigerator","desc":"Sealy Remington Soft","color":"White"},{"id":"inv5266","inventoryId":5266,"brand":"Sealy","model":"Remington Soft","serial":"5266","cost":440,"price":462,"msrp":770,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Freezer","desc":"Sealy Remington Soft","color":"Stainless"},{"id":"inv5267","inventoryId":5267,"brand":"Sealy","model":"Remington Soft","serial":"5267","cost":1329,"price":1395,"msrp":2326,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Freezer","desc":"Sealy Remington Soft","color":"Stainless"},{"id":"inv5268","inventoryId":5268,"brand":"Sealy","model":"Remington Soft","serial":"5268","cost":1319,"price":1781,"msrp":2308,"location":"HEMPST","status":"Available","condition":"NEW","category":"Washer","desc":"Sealy Remington Soft","color":"White"},{"id":"inv5269","inventoryId":5269,"brand":"Sealy","model":"Remington Soft","serial":"5269","cost":665,"price":798,"msrp":1164,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Washer","desc":"Sealy Remington Soft","color":"White"},{"id":"inv5270","inventoryId":5270,"brand":"Sealy","model":"Remington Soft","serial":"5270","cost":896,"price":1075,"msrp":1568,"location":"HEMPST","status":"Available","condition":"OPEN","category":"Range","desc":"Sealy Remington Soft","color":"Slate"},{"id":"inv5271","inventoryId":5271,"brand":"Sealy","model":"Remington Soft","serial":"5271","cost":473,"price":331,"msrp":828,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Refrigerator","desc":"Sealy Remington Soft","color":"Stainless"},{"id":"inv5273","inventoryId":5273,"brand":"Sealy","model":"PEDIC PRO ADAPT","serial":"5273","cost":1100,"price":1155,"msrp":1925,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dishwasher","desc":"Sealy PEDIC PRO ADAPT","color":"Stainless"},{"id":"inv5274","inventoryId":5274,"brand":"Sealy","model":"PEDIC PRO ADAPT","serial":"5274","cost":728,"price":510,"msrp":1274,"location":"HEMPST","status":"Available","condition":"AS-IS","category":"Range","desc":"Sealy PEDIC PRO ADAPT","color":"White"},{"id":"inv5244","inventoryId":5244,"brand":"American Star","model":"BoxSpring Full","serial":"5244","cost":471,"price":565,"msrp":824,"location":"45N SR","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"American Star BoxSpring Full","color":"Stainless"},{"id":"inv5147","inventoryId":5147,"brand":"American Star","model":"F0002496","serial":"5147","cost":795,"price":1073,"msrp":1391,"location":"45N SR","status":"Available","condition":"NEW","category":"Freezer","desc":"American Star F0002496","color":"Black"},{"id":"inv5148","inventoryId":5148,"brand":"American Star","model":"F0002496","serial":"5148","cost":579,"price":550,"msrp":1013,"location":"45N SR","status":"Available","condition":"SD-C","category":"Range","desc":"American Star F0002496","color":"Black"},{"id":"inv4812","inventoryId":4812,"brand":"American Star","model":"King BoxSpring","serial":"4812","cost":1018,"price":1374,"msrp":1782,"location":"45N SR","status":"Available","condition":"NEW","category":"Washer","desc":"American Star King BoxSpring","color":"White"},{"id":"inv4813","inventoryId":4813,"brand":"American Star","model":"F0000697","serial":"4813","cost":855,"price":812,"msrp":1496,"location":"45N SR","status":"Available","condition":"SD-C","category":"Dishwasher","desc":"American Star F0000697","color":"Black"},{"id":"inv4816","inventoryId":4816,"brand":"American Star","model":"F0002030","serial":"4816","cost":1191,"price":1608,"msrp":2084,"location":"45N SR","status":"Available","condition":"NEW","category":"Range","desc":"American Star F0002030","color":"Black"},{"id":"inv4792","inventoryId":4792,"brand":"American Star","model":"F0002705","serial":"4792","cost":1412,"price":1906,"msrp":2471,"location":"45N SR","status":"Available","condition":"NEW","category":"Freezer","desc":"American Star F0002705","color":"Stainless"},{"id":"inv3687","inventoryId":3687,"brand":"American Star","model":"Box Spring","serial":"3687","cost":744,"price":781,"msrp":1302,"location":"HEMPST","status":"Available","condition":"SD-B","category":"Dryer","desc":"American Star Box Spring","color":"Black"},{"id":"inv3491","inventoryId":3491,"brand":"American Star","model":"Twin Boxsprings","serial":"F0003157","cost":604,"price":574,"msrp":1057,"location":"45N SR","status":"Available","condition":"SD-C","category":"Dryer","desc":"American Star Twin Boxsprings","color":"Black"},{"id":"inv3529","inventoryId":3529,"brand":"American Star","model":"King Boxsprings","serial":"F0002690","cost":1267,"price":1520,"msrp":2217,"location":"45N SR","status":"Available","condition":"OPEN","category":"Dishwasher","desc":"American Star King Boxsprings","color":"Stainless"},{"id":"inv3530","inventoryId":3530,"brand":"American Star","model":"Twin Boxsprings","serial":"F0003159","cost":765,"price":918,"msrp":1339,"location":"45N SR","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"American Star Twin Boxsprings","color":"Slate"},{"id":"inv3531","inventoryId":3531,"brand":"American Star","model":"Full Boxsprings","serial":"F0002689","cost":817,"price":980,"msrp":1430,"location":"45N SR","status":"Available","condition":"OPEN","category":"Refrigerator","desc":"American Star Full Boxsprings","color":"Slate"}],"locations":[{"id":"loc_1","code":"45N SR","name":"45N SR","type":"Showroom"},{"id":"loc_2","code":"45WH","name":"45WH","type":"Warehouse"},{"id":"loc_3","code":"45WH - Repair Rodney","name":"45WH - Repair Rodney","type":"Warehouse"},{"id":"loc_4","code":"45WH - Sold","name":"45WH - Sold","type":"Warehouse"},{"id":"loc_5","code":"CONROE","name":"CONROE","type":"Warehouse"},{"id":"loc_6","code":"HEMPST","name":"HEMPST","type":"Warehouse"},{"id":"loc_7","code":"PASADE","name":"PASADE","type":"Warehouse"},{"id":"loc_8","code":"SPRING","name":"SPRING","type":"Warehouse"}]};

// ============ CONSTANTS ============
const COMMISSION_RATES = { 'NEW': 8, 'SD-A': 10, 'SD-B': 12, 'SD-C': 14, 'SD-D': 15, 'OPEN': 10, 'AS-IS': 5, 'CLEARANCE': 6 };
const CONDITION_LABELS = { 'NEW': 'Factory New', 'SD-A': 'Scratch & Dent A', 'SD-B': 'Scratch & Dent B', 'SD-C': 'Scratch & Dent C', 'SD-D': 'Scratch & Dent D', 'OPEN': 'Open Box', 'AS-IS': 'As-Is', 'CLEARANCE': 'Clearance' };
const TAX_RATE = 0.0825;
const DELIVERY_FEES = { 'Pickup': 0, 'Delivery': 75, 'White Glove': 150 };

// ============ CONTEXT & HOOKS ============
const { useState, useEffect, createContext, useContext, useCallback, useMemo } = React;
const AppContext = createContext();
const useApp = () => useContext(AppContext);

// ============ DATABASE CLASS ============
class Database {
    constructor() {
        this.data = this.load();
    }
    
    load() {
        const saved = localStorage.getItem('retailaot_db');
        if (saved) return JSON.parse(saved);
        
        // Initialize with seed data
        return {
            ...SEED_DATA,
            customers: [
                { id: 'c1', name: 'John Smith', phone: '(713) 555-1234', email: 'john@email.com', address: '456 Oak Ave, Houston, TX 77001' },
                { id: 'c2', name: 'Maria Garcia', phone: '(281) 555-5678', email: 'maria@email.com', address: '789 Pine St, Spring, TX 77379' },
                { id: 'c3', name: 'Robert Johnson', phone: '(832) 555-9012', email: 'robert@email.com', address: '321 Elm Dr, Cypress, TX 77429' },
            ],
            orders: [
                { id: 'o1', number: 'ORD-1001', customerId: 'c1', items: [], subtotal: 2098, tax: 173.09, deliveryFee: 100, total: 2371.09, status: 'Complete', paid: true, deliveryType: 'Delivery', salesId: 'u1', locationId: 'loc_1', createdAt: '2025-11-28', rogUploaded: true },
                { id: 'o2', number: 'ORD-1002', customerId: 'c2', items: [], subtotal: 999, tax: 82.42, deliveryFee: 0, total: 1081.42, status: 'Pending Payment', paid: false, deliveryType: 'Pickup', salesId: 'u1', locationId: 'loc_1', createdAt: '2025-11-29', rogUploaded: false },
            ],
            deliveryRequests: [
                { id: 'd1', orderId: 'o1', customerId: 'c1', status: 'Pending', type: 'Delivery', neededBy: '2025-12-05', haulAway: false, notes: '' }
            ],
            routes: [
                { id: 'r1', number: 'RT-201', name: 'North Houston', date: '2025-12-02', driverId: 'u5', status: 'In Progress', stops: [
                    { id: 's1', type: 'Pickup', address: '45N Warehouse', status: 'Complete', completedAt: '8:30 AM' },
                    { id: 's2', type: 'Delivery', customerId: 'c1', address: '456 Oak Ave, Houston', status: 'Pending', eta: '11:00 AM' }
                ]}
            ],
            workOrders: [
                { id: 'w1', number: 'WO-2001', customerId: 'c1', type: 'Warranty', problem: 'Not cooling properly', status: 'Parts Ordered', techId: 'u6', createdAt: '2025-11-30' }
            ],
            exchanges: [],
            returns: [
                { id: 'ret1', number: 'RET-3001', customerId: 'c2', reason: 'Changed Mind', status: 'Pending', originalPrice: 599, restockingFee: 89.85, refundAmount: 509.15, createdAt: '2025-11-30' }
            ],
            customOrders: [
                { id: 'co1', number: 'CO-1001', customerId: 'c3', category: 'Furniture', manufacturer: 'Ashley', item: 'Darcy Sectional', price: 1499, deposit: 749.50, depositPaid: true, status: 'Pending Approval', createdAt: '2025-11-30' }
            ],
            purchaseOrders: [
                { id: 'po1', number: 'PO-LG-001', vendor: 'LG Electronics', items: [{ model: 'LSGL6335Z', qty: 15, price: 831 }], total: 12465, status: 'Pending', expectedDate: '2025-12-10' }
            ],
            activityLog: []
        };
    }
    
    save() { localStorage.setItem('retailaot_db', JSON.stringify(this.data)); }
    reset() { localStorage.removeItem('retailaot_db'); this.data = this.load(); }
    
    // CRUD operations
    getAll(collection) { return this.data[collection] || []; }
    getById(collection, id) { return this.data[collection]?.find(x => x.id === id); }
    
    create(collection, item) {
        const newItem = { id: `${collection}_${Date.now()}`, ...item, createdAt: new Date().toISOString() };
        this.data[collection] = [...(this.data[collection] || []), newItem];
        this.save();
        return newItem;
    }
    
    update(collection, id, updates) {
        this.data[collection] = this.data[collection].map(x => x.id === id ? { ...x, ...updates, updatedAt: new Date().toISOString() } : x);
        this.save();
        return this.getById(collection, id);
    }
    
    delete(collection, id) {
        this.data[collection] = this.data[collection].filter(x => x.id !== id);
        this.save();
    }
    
    query(collection, filter) {
        return this.data[collection]?.filter(item => {
            for (const [key, value] of Object.entries(filter)) {
                if (item[key] !== value) return false;
            }
            return true;
        }) || [];
    }
    
    search(collection, text, fields) {
        const search = text.toLowerCase();
        return this.data[collection]?.filter(item => 
            fields.some(f => item[f] && String(item[f]).toLowerCase().includes(search))
        ) || [];
    }
    
    log(action, entity, details, userId) {
        this.data.activityLog = [
            { id: `log_${Date.now()}`, action, entity, details, userId, timestamp: new Date().toISOString() },
            ...(this.data.activityLog || [])
        ].slice(0, 100);
        this.save();
    }
}

const db = new Database();

// ============ UTILITY COMPONENTS ============
const Toast = ({ message, onClose }) => {
    useEffect(() => { const t = setTimeout(onClose, 2500); return () => clearTimeout(t); }, [onClose]);
    return <div className="toast">{message}</div>;
};

const Modal = ({ title, children, onClose, footer }) => (
    <div className="modal-overlay" onClick={onClose}>
        <div className="modal" onClick={e => e.stopPropagation()}>
            <div className="modal-header">
                <h2>{title}</h2>
                <button className="modal-close" onClick={onClose}></button>
            </div>
            <div className="modal-body">{children}</div>
            {footer && <div className="modal-footer">{footer}</div>}
        </div>
    </div>
);

const Badge = ({ status }) => {
    const map = { 'Available': 'success', 'Complete': 'success', 'Approved': 'success', 'Pending': 'warning', 'Pending Payment': 'warning', 'Pending Approval': 'warning', 'Parts Ordered': 'warning', 'In Progress': 'info', 'In Transit': 'info', 'Pending Delivery': 'info', 'Open': 'info', 'Allocated': 'purple', 'Sold': 'purple' };
    return <span className={`badge badge-${map[status] || 'warning'}`}>{status}</span>;
};

const FormField = ({ label, id, type = 'text', required, options, children, ...props }) => (
    <div className="form-group">
        <label className="form-label">{label}{required && ' *'}</label>
        {type === 'select' ? (
            <select className="form-select" id={id} {...props}>
                {options?.map(o => <option key={o.value || o} value={o.value || o}>{o.label || o}</option>)}
                {children}
            </select>
        ) : type === 'textarea' ? (
            <textarea className="form-textarea" id={id} rows="3" {...props}></textarea>
        ) : (
            <input className="form-input" id={id} type={type} {...props} />
        )}
    </div>
);

// ============ SALES POS APP ============
const SalesPOS = () => {
    const { data, refresh, toast, currentUser } = useApp();
    const [view, setView] = useState('home');
    const [modal, setModal] = useState(null);
    const [search, setSearch] = useState('');
    const [cart, setCart] = useState([]);
    const [customer, setCustomer] = useState(null);

    const inventory = useMemo(() => data.inventory?.filter(i => i.status === 'Available') || [], [data.inventory]);
    const filtered = useMemo(() => !search ? inventory : inventory.filter(i => 
        [i.brand, i.model, i.serial, i.desc].some(f => f?.toLowerCase().includes(search.toLowerCase()))
    ), [inventory, search]);
    
    const myOrders = useMemo(() => data.orders?.filter(o => o.salesId === currentUser?.id) || [], [data.orders, currentUser]);
    const completedOrders = myOrders.filter(o => o.status === 'Complete');
    const totalSales = completedOrders.reduce((s, o) => s + (o.total || 0), 0);
    const commission = completedOrders.reduce((s, o) => s + (o.items || []).reduce((c, id) => {
        const item = data.inventory?.find(i => i.id === id);
        return c + (item ? item.price * (COMMISSION_RATES[item.condition] || 8) / 100 : 0);
    }, 0), 0);

    const cartTotal = useMemo(() => {
        const subtotal = cart.reduce((s, i) => s + i.price, 0);
        return { subtotal, tax: subtotal * TAX_RATE, total: subtotal * (1 + TAX_RATE) };
    }, [cart]);

    const addToCart = (item) => {
        if (cart.find(c => c.id === item.id)) return toast('Already in cart');
        setCart([...cart, item]);
        db.update('inventory', item.id, { status: 'Allocated' });
        refresh();
        toast('Added to cart');
    };

    const removeFromCart = (id) => {
        setCart(cart.filter(c => c.id !== id));
        db.update('inventory', id, { status: 'Available' });
        refresh();
    };

    const checkout = (deliveryType) => {
        if (!customer) return toast('Select customer first');
        if (!cart.length) return toast('Cart is empty');
        
        const deliveryFee = DELIVERY_FEES[deliveryType];
        const order = db.create('orders', {
            number: `ORD-${1003 + (data.orders?.length || 0)}`,
            customerId: customer.id,
            items: cart.map(c => c.id),
            subtotal: cartTotal.subtotal,
            tax: cartTotal.tax,
            deliveryFee,
            total: cartTotal.total + deliveryFee,
            status: 'Pending Payment',
            paid: false,
            deliveryType,
            salesId: currentUser?.id,
            locationId: 'loc_1',
            rogUploaded: false
        });
        
        cart.forEach(item => db.update('inventory', item.id, { status: 'Sold' }));
        db.log('Order Created', 'Order', `${order.number} - $${order.total.toFixed(2)}`, currentUser?.id);
        
        setCart([]);
        setCustomer(null);
        setModal(null);
        refresh();
        toast(`Order ${order.number} created!`);
        setView('orders');
    };

    const recordPayment = (orderId) => {
        const order = data.orders?.find(o => o.id === orderId);
        const newStatus = order?.deliveryType === 'Pickup' ? 'Ready for Pickup' : 'Pending Delivery';
        db.update('orders', orderId, { paid: true, status: newStatus });
        db.log('Payment Recorded', 'Order', order?.number, currentUser?.id);
        refresh();
        toast('Payment recorded');
        setModal(null);
    };

    const uploadROG = (orderId) => {
        db.update('orders', orderId, { rogUploaded: true });
        toast('ROG document uploaded');
        refresh();
    };

    const createCustomer = () => {
        const name = document.getElementById('custName')?.value;
        const phone = document.getElementById('custPhone')?.value;
        if (!name || !phone) return toast('Name and phone required');
        
        const cust = db.create('customers', {
            name, phone,
            email: document.getElementById('custEmail')?.value || '',
            address: document.getElementById('custAddress')?.value || ''
        });
        setCustomer(cust);
        setModal(null);
        refresh();
        toast('Customer created');
    };

    const getCustomer = (id) => data.customers?.find(c => c.id === id);
    const getLoc = (id) => data.locations?.find(l => l.id === id);

    return (
        <div>
            <div className="header" style={{background: 'var(--primary)'}}>
                <div className="list-icon" style={{background:'rgba(255,255,255,0.2)',color:'white'}}><i className="fas fa-store"></i></div>
                <h1>Sales POS</h1>
                {cart.length > 0 && (
                    <button className="header-btn" onClick={() => setModal('cart')}>
                        <i className="fas fa-shopping-cart"></i>
                        <span className="badge-count">{cart.length}</span>
                    </button>
                )}
                <button className="header-btn" onClick={() => setModal('newCustomer')}><i className="fas fa-user-plus"></i></button>
            </div>

            {view === 'home' && (
                <div className="content">
                    <div className="stats-grid">
                        <div className="stat-card"><div className="stat-value" style={{color:'var(--primary)'}}>${totalSales.toFixed(0)}</div><div className="stat-label">Total Sales</div></div>
                        <div className="stat-card"><div className="stat-value" style={{color:'var(--success)'}}>{myOrders.length}</div><div className="stat-label">My Orders</div></div>
                        <div className="stat-card"><div className="stat-value" style={{color:'var(--warning)'}}>${commission.toFixed(0)}</div><div className="stat-label">Commission</div></div>
                        <div className="stat-card"><div className="stat-value">{inventory.length}</div><div className="stat-label">Available</div></div>
                    </div>

                    {customer && (
                        <div className="alert alert-success">
                            <i className="fas fa-user-check"></i>
                            <div style={{flex:1}}><strong>{customer.name}</strong><br/><small>{customer.phone}</small></div>
                            <button className="btn btn-sm btn-outline" onClick={() => setCustomer(null)}>Change</button>
                        </div>
                    )}

                    <div className="card">
                        <div className="card-header">Recent Orders <button className="btn btn-sm btn-outline" onClick={() => setView('orders')}>View All</button></div>
                        {myOrders.length === 0 ? (
                            <div style={{padding:20,textAlign:'center',color:'var(--gray-400)'}}>No orders yet</div>
                        ) : myOrders.slice(0, 5).map(order => (
                            <div key={order.id} className="list-item" onClick={() => setModal({type:'orderDetail', order})}>
                                <div className="list-icon" style={{background: order.status === 'Complete' ? '#dcfce7' : '#fef3c7', color: order.status === 'Complete' ? 'var(--success)' : 'var(--warning)'}}><i className="fas fa-receipt"></i></div>
                                <div className="list-content">
                                    <div className="list-title">{order.number}  {getCustomer(order.customerId)?.name}</div>
                                    <div className="list-subtitle">{order.items?.length || 0} items  {order.deliveryType}</div>
                                </div>
                                <div className="list-meta">
                                    <div className="list-price">${order.total?.toFixed(2)}</div>
                                    <Badge status={order.status} />
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            )}

            {view === 'inventory' && (
                <>
                    <div className="search-bar">
                        <i className="fas fa-search search-icon"></i>
                        <input className="search-input" placeholder="Search brand, model, serial..." value={search} onChange={e => setSearch(e.target.value)} />
                    </div>
                    <div className="content">
                        <div className="card">
                            {filtered.length === 0 ? (
                                <div className="empty-state"><i className="fas fa-box-open"></i><p>No items found</p></div>
                            ) : filtered.slice(0, 50).map(item => (
                                <div key={item.id} className="list-item" onClick={() => setModal({type:'itemDetail', item})}>
                                    <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-cube"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{item.brand} {item.model}</div>
                                        <div className="list-subtitle">{CONDITION_LABELS[item.condition]}  {item.location}</div>
                                        <div className="list-subtitle" style={{fontSize:11}}>SN: {item.serial}</div>
                                    </div>
                                    <div className="list-meta">
                                        <div className="list-price">${item.price}</div>
                                        <div className="list-commission">+${(item.price * COMMISSION_RATES[item.condition] / 100).toFixed(0)}</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </>
            )}

            {view === 'orders' && (
                <div className="content">
                    <div className="card">
                        {(data.orders || []).map(order => (
                            <div key={order.id} className="list-item" onClick={() => setModal({type:'orderDetail', order})}>
                                <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-receipt"></i></div>
                                <div className="list-content">
                                    <div className="list-title">{order.number}  {getCustomer(order.customerId)?.name}</div>
                                    <div className="list-subtitle">{order.createdAt}  {order.items?.length || 0} items</div>
                                </div>
                                <div className="list-meta">
                                    <div className="list-price">${order.total?.toFixed(2)}</div>
                                    <Badge status={order.status} />
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            )}

            {view === 'customers' && (
                <div className="content">
                    <div className="card">
                        <div className="card-header">Customers ({data.customers?.length || 0}) <button className="btn btn-sm btn-primary" onClick={() => setModal('newCustomer')}><i className="fas fa-plus"></i></button></div>
                        {(data.customers || []).map(cust => (
                            <div key={cust.id} className="list-item" onClick={() => setModal({type:'customerDetail', cust})}>
                                <div className="list-icon" style={{background: customer?.id === cust.id ? '#dcfce7' : '#f3e8ff', color: customer?.id === cust.id ? 'var(--success)' : 'var(--purple)'}}><i className="fas fa-user"></i></div>
                                <div className="list-content">
                                    <div className="list-title">{cust.name}</div>
                                    <div className="list-subtitle">{cust.phone}</div>
                                </div>
                                <button className="btn btn-sm btn-outline" onClick={(e) => { e.stopPropagation(); setCustomer(cust); toast(`Selected: ${cust.name}`); }}>
                                    {customer?.id === cust.id ? <i className="fas fa-check"></i> : 'Select'}
                                </button>
                            </div>
                        ))}
                    </div>
                </div>
            )}

            <button className="fab" onClick={() => customer ? setView('inventory') : toast('Select customer first')}><i className="fas fa-plus"></i></button>

            <div className="bottom-nav">
                <button className={`nav-item ${view === 'home' ? 'active' : ''}`} onClick={() => setView('home')}><i className="fas fa-home"></i>Home</button>
                <button className={`nav-item ${view === 'inventory' ? 'active' : ''}`} onClick={() => setView('inventory')}><i className="fas fa-box"></i>Inventory</button>
                <button className={`nav-item ${view === 'orders' ? 'active' : ''}`} onClick={() => setView('orders')}><i className="fas fa-receipt"></i>Orders</button>
                <button className={`nav-item ${view === 'customers' ? 'active' : ''}`} onClick={() => setView('customers')}><i className="fas fa-users"></i>Customers</button>
            </div>

            {/* MODALS */}
            {modal === 'cart' && (
                <Modal title={`Cart (${cart.length})`} onClose={() => setModal(null)} footer={
                    <>
                        <button className="btn btn-outline" style={{flex:1}} onClick={() => setModal(null)}>Continue</button>
                        <button className="btn btn-primary" style={{flex:1}} onClick={() => setModal('checkout')} disabled={!customer || !cart.length}>Checkout</button>
                    </>
                }>
                    {!customer && <div className="alert alert-warning"><i className="fas fa-exclamation-triangle"></i> Select customer first</div>}
                    {customer && <div className="alert alert-success"><i className="fas fa-user"></i> {customer.name}</div>}
                    {cart.map(item => (
                        <div key={item.id} className="list-item">
                            <div className="list-content">
                                <div className="list-title">{item.brand} {item.model}</div>
                                <div className="list-subtitle">{CONDITION_LABELS[item.condition]}</div>
                            </div>
                            <div style={{display:'flex',alignItems:'center',gap:8}}>
                                <span style={{fontWeight:600}}>${item.price}</span>
                                <button className="btn btn-sm btn-danger" onClick={() => removeFromCart(item.id)}><i className="fas fa-trash"></i></button>
                            </div>
                        </div>
                    ))}
                    {cart.length > 0 && (
                        <div style={{padding:'16px 0', borderTop:'1px solid var(--gray-200)', marginTop:16}}>
                            <div className="info-row"><span>Subtotal:</span><span>${cartTotal.subtotal.toFixed(2)}</span></div>
                            <div className="info-row"><span>Tax (8.25%):</span><span>${cartTotal.tax.toFixed(2)}</span></div>
                            <div className="info-row" style={{fontSize:18}}><span><strong>Total:</strong></span><span><strong>${cartTotal.total.toFixed(2)}</strong></span></div>
                        </div>
                    )}
                </Modal>
            )}

            {modal === 'checkout' && (
                <Modal title="Checkout" onClose={() => setModal(null)} footer={
                    <button className="btn btn-success" style={{flex:1}} onClick={() => checkout(document.getElementById('deliveryType')?.value || 'Pickup')}><i className="fas fa-check"></i> Create Order</button>
                }>
                    <div className="alert alert-info"><i className="fas fa-user"></i> {customer?.name}  {cart.length} items</div>
                    <FormField label="Delivery Type" id="deliveryType" type="select" options={[
                        {value:'Pickup', label:'Customer Pickup - $0'},
                        {value:'Delivery', label:'Standard Delivery - $75'},
                        {value:'White Glove', label:'White Glove - $150'}
                    ]} />
                    <FormField label="Order Notes" id="orderNotes" type="textarea" placeholder="Special instructions..." />
                    <div style={{background:'var(--gray-100)',padding:16,borderRadius:12,marginTop:16}}>
                        <div className="info-row"><span>Subtotal:</span><span>${cartTotal.subtotal.toFixed(2)}</span></div>
                        <div className="info-row"><span>Tax:</span><span>${cartTotal.tax.toFixed(2)}</span></div>
                        <div className="info-row" style={{fontWeight:700}}><span>Total:</span><span>${cartTotal.total.toFixed(2)} + delivery</span></div>
                    </div>
                </Modal>
            )}

            {modal?.type === 'itemDetail' && (
                <Modal title="Item Details" onClose={() => setModal(null)} footer={
                    <>
                        <button className="btn btn-outline" style={{flex:1}} onClick={() => { setModal({type:'transfer', item: modal.item}); }}><i className="fas fa-exchange-alt"></i> Transfer</button>
                        <button className="btn btn-primary" style={{flex:1}} onClick={() => { addToCart(modal.item); setModal(null); }}><i className="fas fa-cart-plus"></i> Add to Cart</button>
                    </>
                }>
                    <div style={{padding:24, background:'linear-gradient(135deg, var(--primary), #4285f4)', color:'white', borderRadius:16, margin:'-20px -20px 20px -20px', textAlign:'center'}}>
                        <div style={{fontSize:12,opacity:0.8}}>{modal.item.brand}</div>
                        <div style={{fontSize:20,fontWeight:600}}>{modal.item.model}</div>
                        <div style={{fontSize:36,fontWeight:700,margin:'8px 0'}}>${modal.item.price}</div>
                        <div style={{fontSize:14,opacity:0.7,textDecoration:'line-through'}}>MSRP ${modal.item.msrp}</div>
                    </div>
                    <div style={{background:'#dcfce7',padding:16,borderRadius:12,display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:16}}>
                        <div>
                            <div style={{fontSize:12,color:'var(--gray-500)'}}>Commission ({COMMISSION_RATES[modal.item.condition]}%)</div>
                            <div style={{fontSize:13,fontWeight:500}}>{CONDITION_LABELS[modal.item.condition]}</div>
                        </div>
                        <div style={{fontSize:24,fontWeight:700,color:'#166534'}}>+${(modal.item.price * COMMISSION_RATES[modal.item.condition] / 100).toFixed(2)}</div>
                    </div>
                    <div className="info-row"><span>Category:</span><span>{modal.item.category}</span></div>
                    <div className="info-row"><span>Serial:</span><span>{modal.item.serial}</span></div>
                    <div className="info-row"><span>Location:</span><span>{modal.item.location}</span></div>
                    <div className="info-row"><span>Color:</span><span>{modal.item.color}</span></div>
                    <div className="info-row"><span>Savings:</span><span style={{color:'var(--success)'}}>${modal.item.msrp - modal.item.price} ({Math.round((1 - modal.item.price/modal.item.msrp)*100)}% off)</span></div>
                </Modal>
            )}

            {modal?.type === 'orderDetail' && (
                <Modal title={modal.order.number} onClose={() => setModal(null)} footer={
                    !modal.order.paid ? (
                        <>
                            {!modal.order.rogUploaded && <button className="btn btn-warning" style={{flex:1}} onClick={() => uploadROG(modal.order.id)}><i className="fas fa-file-upload"></i> Upload ROG</button>}
                            <button className="btn btn-success" style={{flex:1}} onClick={() => recordPayment(modal.order.id)} disabled={!modal.order.rogUploaded}>
                                <i className="fas fa-dollar-sign"></i> Record Payment
                            </button>
                        </>
                    ) : modal.order.status === 'Pending Delivery' ? (
                        <button className="btn btn-primary" style={{flex:1}} onClick={() => {
                            db.create('deliveryRequests', { orderId: modal.order.id, customerId: modal.order.customerId, status: 'Pending', type: modal.order.deliveryType, neededBy: '', haulAway: false });
                            refresh(); toast('Delivery request created'); setModal(null);
                        }}><i className="fas fa-truck"></i> Request Delivery</button>
                    ) : null
                }>
                    <div className={`alert ${modal.order.paid ? 'alert-success' : 'alert-warning'}`}>
                        <i className={`fas fa-${modal.order.paid ? 'check-circle' : 'clock'}`}></i>
                        {modal.order.paid ? 'Payment Verified' : 'Payment Pending'}
                        {!modal.order.rogUploaded && !modal.order.paid && <span style={{marginLeft:8}}>  ROG Required</span>}
                    </div>
                    <div className="info-row"><span>Customer:</span><span>{getCustomer(modal.order.customerId)?.name}</span></div>
                    <div className="info-row"><span>Phone:</span><span>{getCustomer(modal.order.customerId)?.phone}</span></div>
                    <div className="info-row"><span>Date:</span><span>{modal.order.createdAt}</span></div>
                    <div className="info-row"><span>Delivery:</span><span>{modal.order.deliveryType}</span></div>
                    <div className="info-row"><span>Status:</span><Badge status={modal.order.status} /></div>
                    <div style={{marginTop:16,paddingTop:16,borderTop:'1px solid var(--gray-200)'}}>
                        <div className="info-row"><span>Subtotal:</span><span>${modal.order.subtotal?.toFixed(2)}</span></div>
                        <div className="info-row"><span>Tax:</span><span>${modal.order.tax?.toFixed(2)}</span></div>
                        <div className="info-row"><span>Delivery:</span><span>${modal.order.deliveryFee}</span></div>
                        <div className="info-row" style={{fontWeight:700,fontSize:18}}><span>Total:</span><span>${modal.order.total?.toFixed(2)}</span></div>
                    </div>
                </Modal>
            )}

            {modal === 'newCustomer' && (
                <Modal title="New Customer" onClose={() => setModal(null)} footer={
                    <button className="btn btn-primary" style={{flex:1}} onClick={createCustomer}><i className="fas fa-check"></i> Create Customer</button>
                }>
                    <FormField label="Name" id="custName" required placeholder="Full name" />
                    <FormField label="Phone" id="custPhone" required placeholder="(xxx) xxx-xxxx" />
                    <FormField label="Email" id="custEmail" type="email" placeholder="email@example.com" />
                    <FormField label="Address" id="custAddress" type="textarea" placeholder="Street, City, State ZIP" />
                </Modal>
            )}

            {modal?.type === 'customerDetail' && (
                <Modal title={modal.cust.name} onClose={() => setModal(null)} footer={
                    <button className="btn btn-primary" style={{flex:1}} onClick={() => { setCustomer(modal.cust); setModal(null); setView('inventory'); toast(`Selected: ${modal.cust.name}`); }}><i className="fas fa-check"></i> Select & Shop</button>
                }>
                    <div className="info-row"><span>Phone:</span><span>{modal.cust.phone}</span></div>
                    <div className="info-row"><span>Email:</span><span>{modal.cust.email || '-'}</span></div>
                    <div className="info-row"><span>Address:</span><span>{modal.cust.address || '-'}</span></div>
                    <div style={{marginTop:16}}><strong>Order History:</strong></div>
                    {(data.orders || []).filter(o => o.customerId === modal.cust.id).map(order => (
                        <div key={order.id} className="list-item" style={{padding:'10px 0'}}>
                            <div className="list-content"><div className="list-title">{order.number}</div><div className="list-subtitle">{order.createdAt}</div></div>
                            <div className="list-meta"><div className="list-price">${order.total?.toFixed(2)}</div><Badge status={order.status} /></div>
                        </div>
                    ))}
                </Modal>
            )}
        </div>
    );
};

// ============ WAREHOUSE APP ============
const WarehouseApp = () => {
    const { data, refresh, toast } = useApp();
    const [view, setView] = useState('inventory');
    const [modal, setModal] = useState(null);
    const [search, setSearch] = useState('');

    const inventory = data.inventory || [];
    const available = inventory.filter(i => i.status === 'Available');
    const allocated = inventory.filter(i => i.status === 'Allocated' || i.status === 'Sold');
    const transfers = data.transferRequests || [];
    const pendingTransfers = transfers.filter(t => t.status === 'Open' || t.status === 'Pending');
    const pos = data.purchaseOrders || [];

    const filtered = !search ? inventory : inventory.filter(i => 
        [i.brand, i.model, i.serial].some(f => f?.toLowerCase().includes(search.toLowerCase()))
    );

    const byLocation = useMemo(() => {
        const groups = {};
        filtered.forEach(item => {
            if (!groups[item.location]) groups[item.location] = [];
            groups[item.location].push(item);
        });
        return Object.entries(groups).sort((a, b) => b[1].length - a[1].length);
    }, [filtered]);

    const receiveItem = () => {
        const brand = document.getElementById('rcvBrand')?.value;
        const model = document.getElementById('rcvModel')?.value;
        if (!brand || !model) return toast('Brand and model required');
        
        const cost = parseFloat(document.getElementById('rcvCost')?.value) || 500;
        const condition = document.getElementById('rcvCondition')?.value || 'NEW';
        const mult = { 'NEW': 1.35, 'SD-A': 1.15, 'SD-B': 1.05, 'SD-C': 0.95, 'OPEN': 1.2, 'AS-IS': 0.7 };
        
        db.create('inventory', {
            inventoryId: Date.now(),
            brand, model,
            serial: document.getElementById('rcvSerial')?.value || `SN-${Date.now()}`,
            desc: `${brand} ${model}`,
            category: document.getElementById('rcvCategory')?.value || 'Appliance',
            condition,
            cost,
            price: Math.round(cost * (mult[condition] || 1)),
            msrp: Math.round(cost * 1.75),
            location: document.getElementById('rcvLocation')?.value || 'loc_1',
            color: document.getElementById('rcvColor')?.value || 'Stainless',
            status: 'Available'
        });
        
        db.log('Inventory Received', 'Inventory', `${brand} ${model}`, 'system');
        refresh();
        setModal(null);
        toast('Item received successfully');
    };

    const approveTransfer = (tr) => {
        db.update('transferRequests', tr.id, { status: 'In Transit' });
        const item = inventory.find(i => i.inventoryId === tr.inventoryId);
        if (item) db.update('inventory', item.id, { status: 'In Transit' });
        refresh();
        toast('Transfer approved');
    };

    const completeTransfer = (tr) => {
        db.update('transferRequests', tr.id, { status: 'Complete' });
        const item = inventory.find(i => i.inventoryId === tr.inventoryId);
        if (item) db.update('inventory', item.id, { status: 'Available', location: tr.toLocation });
        refresh();
        toast('Transfer completed');
    };

    const receivePO = (po) => {
        po.items?.forEach((item, idx) => {
            for (let i = 0; i < (item.qty || 1); i++) {
                db.create('inventory', {
                    inventoryId: Date.now() + idx * 100 + i,
                    brand: po.vendor?.split(' ')[0] || 'Unknown',
                    model: item.model,
                    serial: `SN-PO-${Date.now()}-${idx}-${i}`,
                    desc: item.desc || item.model,
                    category: 'Appliance',
                    condition: 'NEW',
                    cost: item.price,
                    price: Math.round(item.price * 1.35),
                    msrp: Math.round(item.price * 1.75),
                    location: '45N SR',
                    color: 'Stainless',
                    status: 'Available'
                });
            }
        });
        db.update('purchaseOrders', po.id, { status: 'Received' });
        db.log('PO Received', 'PurchaseOrder', po.number, 'system');
        refresh();
        toast(`PO ${po.number} received - ${po.items?.reduce((s, i) => s + (i.qty || 1), 0)} items added`);
    };

    return (
        <div>
            <div className="header" style={{background: 'var(--orange)'}}>
                <div className="list-icon" style={{background:'rgba(255,255,255,0.2)',color:'white'}}><i className="fas fa-warehouse"></i></div>
                <h1>Warehouse</h1>
                <button className="header-btn" onClick={() => setModal('receive')}><i className="fas fa-plus"></i></button>
                <button className="header-btn" onClick={() => setModal('scan')}><i className="fas fa-barcode"></i></button>
            </div>

            <div className="inner-tabs">
                <button className={`inner-tab ${view === 'inventory' ? 'active' : ''}`} onClick={() => setView('inventory')}>Inventory</button>
                <button className={`inner-tab ${view === 'transfers' ? 'active' : ''}`} onClick={() => setView('transfers')}>Transfers ({pendingTransfers.length})</button>
                <button className={`inner-tab ${view === 'pos' ? 'active' : ''}`} onClick={() => setView('pos')}>POs ({pos.filter(p => p.status === 'Pending').length})</button>
            </div>

            <div className="content">
                <div className="stats-grid">
                    <div className="stat-card"><div className="stat-value" style={{color:'var(--orange)'}}>{inventory.length}</div><div className="stat-label">Total Items</div></div>
                    <div className="stat-card"><div className="stat-value" style={{color:'var(--success)'}}>{available.length}</div><div className="stat-label">Available</div></div>
                    <div className="stat-card"><div className="stat-value" style={{color:'var(--warning)'}}>{allocated.length}</div><div className="stat-label">Allocated/Sold</div></div>
                    <div className="stat-card"><div className="stat-value" style={{color:'var(--primary)'}}>{pendingTransfers.length}</div><div className="stat-label">Pending Transfers</div></div>
                </div>

                {view === 'inventory' && (
                    <>
                        <div className="search-bar" style={{margin:'-16px -16px 16px -16px', padding:'12px 16px', background:'white'}}>
                            <i className="fas fa-search search-icon"></i>
                            <input className="search-input" placeholder="Search inventory..." value={search} onChange={e => setSearch(e.target.value)} />
                        </div>
                        {byLocation.map(([loc, items]) => (
                            <div key={loc} className="card">
                                <div className="card-header">{loc} ({items.length}) <span style={{fontSize:12,color:'var(--gray-500)'}}>${(items.reduce((s, i) => s + i.price, 0)/1000).toFixed(0)}K value</span></div>
                                {items.slice(0, 5).map(item => (
                                    <div key={item.id} className="list-item" onClick={() => setModal({type:'editItem', item})}>
                                        <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-cube"></i></div>
                                        <div className="list-content">
                                            <div className="list-title">{item.brand} {item.model}</div>
                                            <div className="list-subtitle">{CONDITION_LABELS[item.condition]}  {item.serial}</div>
                                        </div>
                                        <div className="list-meta">
                                            <div className="list-price">${item.price}</div>
                                            <Badge status={item.status} />
                                        </div>
                                    </div>
                                ))}
                                {items.length > 5 && <div style={{padding:12,textAlign:'center',color:'var(--gray-400)',fontSize:12}}>+{items.length - 5} more</div>}
                            </div>
                        ))}
                    </>
                )}

                {view === 'transfers' && (
                    <div className="card">
                        {transfers.length === 0 ? (
                            <div className="empty-state"><i className="fas fa-exchange-alt"></i><p>No transfer requests</p></div>
                        ) : transfers.map(tr => (
                            <div key={tr.id} className="list-item">
                                <div className="list-icon" style={{background:'#e0f2fe',color:'#0369a1'}}><i className="fas fa-exchange-alt"></i></div>
                                <div className="list-content">
                                    <div className="list-title">{tr.brand} {tr.model}</div>
                                    <div className="list-subtitle">{tr.fromLocation}  {tr.toLocation}</div>
                                    <div className="list-subtitle">{tr.customerName}  {tr.requestedBy}</div>
                                </div>
                                <div className="list-meta">
                                    <Badge status={tr.status} />
                                    {tr.status === 'Open' && <button className="btn btn-sm btn-success" style={{marginTop:4}} onClick={() => approveTransfer(tr)}>Approve</button>}
                                    {tr.status === 'In Transit' && <button className="btn btn-sm btn-primary" style={{marginTop:4}} onClick={() => completeTransfer(tr)}>Complete</button>}
                                </div>
                            </div>
                        ))}
                    </div>
                )}

                {view === 'pos' && (
                    <>
                        <div className="card-header" style={{background:'white',margin:'-16px -16px 16px -16px',padding:'12px 16px'}}>
                            Purchase Orders
                            <button className="btn btn-sm btn-primary" onClick={() => setModal('newPO')}><i className="fas fa-plus"></i></button>
                        </div>
                        {pos.map(po => (
                            <div key={po.id} className="card" onClick={() => setModal({type:'poDetail', po})}>
                                <div className="list-item">
                                    <div className="list-icon" style={{background:'#fef3c7',color:'var(--warning)'}}><i className="fas fa-file-invoice"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{po.number}</div>
                                        <div className="list-subtitle">{po.vendor}  {po.items?.reduce((s, i) => s + (i.qty || 1), 0)} units</div>
                                        <div className="list-subtitle">Expected: {po.expectedDate}</div>
                                    </div>
                                    <div className="list-meta">
                                        <div className="list-price">${po.total?.toFixed(0)}</div>
                                        <Badge status={po.status} />
                                    </div>
                                </div>
                            </div>
                        ))}
                    </>
                )}
            </div>

            <div className="bottom-nav">
                <button className={`nav-item ${view === 'inventory' ? 'active' : ''}`} onClick={() => setView('inventory')}><i className="fas fa-boxes"></i>Inventory</button>
                <button className={`nav-item ${view === 'transfers' ? 'active' : ''}`} onClick={() => setView('transfers')}><i className="fas fa-exchange-alt"></i>Transfers</button>
                <button className={`nav-item ${view === 'pos' ? 'active' : ''}`} onClick={() => setView('pos')}><i className="fas fa-file-invoice"></i>POs</button>
            </div>

            {/* MODALS */}
            {modal === 'receive' && (
                <Modal title="Receive Inventory" onClose={() => setModal(null)} footer={
                    <button className="btn btn-success" style={{flex:1}} onClick={receiveItem}><i className="fas fa-check"></i> Receive Item</button>
                }>
                    <div className="form-row">
                        <FormField label="Brand" id="rcvBrand" required placeholder="Samsung, LG, etc." />
                        <FormField label="Model" id="rcvModel" required placeholder="Model number" />
                    </div>
                    <div className="form-row">
                        <FormField label="Category" id="rcvCategory" type="select" options={['Refrigerator','Washer','Dryer','Range','Dishwasher','Freezer','Microwave','Furniture','Mattress']} />
                        <FormField label="Condition" id="rcvCondition" type="select" options={Object.keys(CONDITION_LABELS).map(k => ({value:k, label:CONDITION_LABELS[k]}))} />
                    </div>
                    <div className="form-row">
                        <FormField label="Cost" id="rcvCost" type="number" placeholder="0.00" />
                        <FormField label="Serial" id="rcvSerial" placeholder="Serial number" />
                    </div>
                    <div className="form-row">
                        <FormField label="Location" id="rcvLocation" type="select" options={(data.locations || []).map(l => ({value:l.code, label:l.name}))} />
                        <FormField label="Color" id="rcvColor" type="select" options={['Stainless','White','Black','Slate','Bisque']} />
                    </div>
                </Modal>
            )}

            {modal?.type === 'editItem' && (
                <Modal title="Edit Item" onClose={() => setModal(null)} footer={
                    <button className="btn btn-primary" style={{flex:1}} onClick={() => {
                        db.update('inventory', modal.item.id, {
                            price: parseFloat(document.getElementById('editPrice')?.value) || modal.item.price,
                            condition: document.getElementById('editCondition')?.value || modal.item.condition,
                            location: document.getElementById('editLocation')?.value || modal.item.location,
                            status: document.getElementById('editStatus')?.value || modal.item.status
                        });
                        refresh(); setModal(null); toast('Item updated');
                    }}><i className="fas fa-save"></i> Save Changes</button>
                }>
                    <div className="alert alert-info"><strong>{modal.item.brand} {modal.item.model}</strong><br/>SN: {modal.item.serial}</div>
                    <FormField label="Price" id="editPrice" type="number" defaultValue={modal.item.price} />
                    <FormField label="Condition" id="editCondition" type="select" defaultValue={modal.item.condition} options={Object.keys(CONDITION_LABELS).map(k => ({value:k, label:CONDITION_LABELS[k]}))} />
                    <FormField label="Location" id="editLocation" type="select" defaultValue={modal.item.location} options={(data.locations || []).map(l => ({value:l.code, label:l.name}))} />
                    <FormField label="Status" id="editStatus" type="select" defaultValue={modal.item.status} options={['Available','Allocated','In Transit','Sold','Damaged']} />
                </Modal>
            )}

            {modal?.type === 'poDetail' && (
                <Modal title={modal.po.number} onClose={() => setModal(null)} footer={
                    modal.po.status === 'Pending' && <button className="btn btn-success" style={{flex:1}} onClick={() => { receivePO(modal.po); setModal(null); }}><i className="fas fa-truck-loading"></i> Receive All Items</button>
                }>
                    <div className="info-row"><span>Vendor:</span><span>{modal.po.vendor}</span></div>
                    <div className="info-row"><span>Expected:</span><span>{modal.po.expectedDate}</span></div>
                    <div className="info-row"><span>Status:</span><Badge status={modal.po.status} /></div>
                    <div style={{marginTop:16}}><strong>Items:</strong></div>
                    {modal.po.items?.map((item, idx) => (
                        <div key={idx} className="info-row"><span>{item.model}  {item.qty || 1}</span><span>${((item.price || 0) * (item.qty || 1)).toFixed(2)}</span></div>
                    ))}
                    <div className="info-row" style={{fontWeight:700,marginTop:8,paddingTop:8,borderTop:'2px solid var(--gray-200)'}}><span>Total:</span><span>${modal.po.total?.toFixed(2)}</span></div>
                </Modal>
            )}

            {modal === 'scan' && (
                <Modal title="Barcode Scanner" onClose={() => setModal(null)}>
                    <div style={{textAlign:'center',padding:32}}>
                        <i className="fas fa-barcode" style={{fontSize:64,color:'var(--gray-300)',marginBottom:16}}></i>
                        <p style={{marginBottom:16}}>Scan or enter serial number</p>
                        <input className="form-input" placeholder="Enter serial or UPC..." onKeyPress={e => {
                            if (e.key === 'Enter') {
                                const item = inventory.find(i => i.serial?.toLowerCase() === e.target.value.toLowerCase());
                                if (item) { setModal({type:'editItem', item}); }
                                else toast('Item not found');
                            }
                        }} autoFocus />
                    </div>
                </Modal>
            )}
        </div>
    );
};

// ============ DELIVERY APP ============
const DeliveryApp = () => {
    const { data, refresh, toast } = useApp();
    const [modal, setModal] = useState(null);

    const routes = data.routes || [];
    const route = routes[0];
    const stops = route?.stops || [];
    const completed = stops.filter(s => s.status === 'Complete').length;

    const getCustomer = (id) => data.customers?.find(c => c.id === id);

    const completeStop = (stopId, status = 'Complete', notes = '') => {
        const updatedStops = stops.map(s => s.id === stopId ? { 
            ...s, 
            status, 
            completedAt: new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}),
            notes 
        } : s);
        db.update('routes', route.id, { stops: updatedStops });
        db.log('Stop Completed', 'Route', `Stop ${stopId} - ${status}`, 'system');
        refresh();
        toast(`Stop ${status === 'Complete' ? 'completed' : 'updated'}!`);
        setModal(null);
    };

    return (
        <div>
            <div className="header" style={{background: 'var(--success)'}}>
                <div className="list-icon" style={{background:'rgba(255,255,255,0.2)',color:'white'}}><i className="fas fa-truck"></i></div>
                <h1>Delivery</h1>
                <button className="header-btn"><i className="fas fa-phone"></i></button>
            </div>

            <div className="content">
                {route ? (
                    <>
                        <div style={{padding:24, background:'linear-gradient(135deg, var(--success), #22c55e)', color:'white', borderRadius:16, marginBottom:16}}>
                            <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start'}}>
                                <div>
                                    <div style={{fontSize:12,opacity:0.9}}>Route #{route.number}</div>
                                    <div style={{fontSize:20,fontWeight:600}}>{route.name}</div>
                                    <div style={{fontSize:12,marginTop:4,opacity:0.8}}>Driver  Truck</div>
                                </div>
                                <div style={{textAlign:'right'}}>
                                    <div style={{fontSize:32,fontWeight:700}}>{completed}/{stops.length}</div>
                                    <div style={{fontSize:12,opacity:0.9}}>stops done</div>
                                </div>
                            </div>
                            <div className="progress-bar" style={{marginTop:16,background:'rgba(255,255,255,0.3)'}}>
                                <div className="progress-fill" style={{width:`${stops.length ? (completed/stops.length)*100 : 0}%`,background:'white'}}></div>
                            </div>
                        </div>

                        <div className="card-header" style={{background:'white',margin:'0 -16px',padding:'12px 16px'}}>Today's Stops</div>
                        <div className="card">
                            {stops.map((stop, idx) => {
                                const isComplete = stop.status === 'Complete';
                                const isCurrent = !isComplete && stops.slice(0, idx).every(s => s.status === 'Complete');
                                const customer = stop.customerId ? getCustomer(stop.customerId) : null;
                                
                                return (
                                    <div key={stop.id} className="route-stop" style={{opacity: isComplete ? 0.6 : 1, background: isCurrent ? '#dbeafe' : 'transparent'}}>
                                        <div className="stop-number" style={{background: isComplete ? 'var(--success)' : isCurrent ? 'var(--primary)' : 'var(--gray-300)', color: isComplete || isCurrent ? 'white' : 'var(--gray-600)'}}>
                                            {isComplete ? <i className="fas fa-check"></i> : idx + 1}
                                        </div>
                                        <div style={{flex:1}}>
                                            <div className="list-title">{stop.type}</div>
                                            <div className="list-subtitle">{stop.address}</div>
                                            {customer && <div className="list-subtitle">{customer.name}  {customer.phone}</div>}
                                            
                                            {isComplete && (
                                                <div style={{marginTop:8}}>
                                                    <span className="badge badge-success"><i className="fas fa-check"></i> {stop.completedAt}</span>
                                                </div>
                                            )}
                                            {!isComplete && stop.eta && <span className="badge badge-warning">ETA {stop.eta}</span>}
                                            
                                            {isCurrent && (
                                                <div className="action-row">
                                                    <button className="btn btn-sm btn-success" onClick={() => setModal({type:'completeStop', stop})}><i className="fas fa-check"></i> Complete</button>
                                                    <button className="btn btn-sm btn-outline"><i className="fas fa-phone"></i></button>
                                                    <button className="btn btn-sm btn-outline"><i className="fas fa-directions"></i></button>
                                                    <button className="btn btn-sm btn-warning" onClick={() => setModal({type:'problemStop', stop})}><i className="fas fa-exclamation-triangle"></i></button>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    </>
                ) : (
                    <div className="empty-state"><i className="fas fa-route"></i><p>No route assigned today</p></div>
                )}
            </div>

            <div className="bottom-nav">
                <button className="nav-item active"><i className="fas fa-route"></i>Route</button>
                <button className="nav-item"><i className="fas fa-map-marked-alt"></i>Map</button>
                <button className="nav-item"><i className="fas fa-history"></i>History</button>
            </div>

            {modal?.type === 'completeStop' && (
                <Modal title="Complete Stop" onClose={() => setModal(null)} footer={
                    <button className="btn btn-success" style={{flex:1}} onClick={() => completeStop(modal.stop.id, 'Complete', document.getElementById('stopNotes')?.value)}><i className="fas fa-check"></i> Mark Complete</button>
                }>
                    <FormField label="Status" id="stopStatus" type="select" options={['Delivered Successfully','Partial Delivery','Pickup Complete']} />
                    <FormField label="Notes" id="stopNotes" type="textarea" placeholder="Delivery notes..." />
                    <div className="form-group">
                        <label className="form-label">Customer Signature</label>
                        <div className="signature-pad signed"><i className="fas fa-check-circle" style={{marginRight:8}}></i> Tap to capture signature</div>
                    </div>
                    <button className="btn btn-outline btn-block"><i className="fas fa-camera"></i> Take Photo</button>
                </Modal>
            )}

            {modal?.type === 'problemStop' && (
                <Modal title="Report Problem" onClose={() => setModal(null)} footer={
                    <button className="btn btn-warning" style={{flex:1}} onClick={() => completeStop(modal.stop.id, document.getElementById('problemType')?.value, document.getElementById('problemNotes')?.value)}><i className="fas fa-exclamation-triangle"></i> Report Issue</button>
                }>
                    <FormField label="Problem Type" id="problemType" type="select" options={['Not Home','Refused Delivery','Wrong Address','Access Issue','Item Damaged']} />
                    <FormField label="Details" id="problemNotes" type="textarea" placeholder="Describe the issue..." />
                    <button className="btn btn-outline btn-block"><i className="fas fa-camera"></i> Take Photo</button>
                </Modal>
            )}
        </div>
    );
};

// ============ SCHEDULER APP ============
const SchedulerApp = () => {
    const { data, refresh, toast } = useApp();
    const [view, setView] = useState('pending');
    const [modal, setModal] = useState(null);

    const deliveryReqs = data.deliveryRequests || [];
    const transfers = data.transferRequests || [];
    const customOrders = data.customOrders || [];
    const routes = data.routes || [];
    
    const pendingDeliveries = deliveryReqs.filter(d => d.status === 'Pending');
    const pendingTransfers = transfers.filter(t => t.status === 'Open' || t.status === 'Pending');
    const pendingCustom = customOrders.filter(c => c.status === 'Pending Approval');
    const pendingCount = pendingDeliveries.length + pendingTransfers.length + pendingCustom.length;

    const getCustomer = (id) => data.customers?.find(c => c.id === id);
    const getOrder = (id) => data.orders?.find(o => o.id === id);

    const approveDelivery = (id) => {
        db.update('deliveryRequests', id, { status: 'Approved' });
        db.log('Delivery Approved', 'Delivery', id, 'system');
        refresh();
        toast('Delivery approved');
    };

    const approveCustomOrder = (id) => {
        db.update('customOrders', id, { status: 'Approved' });
        db.log('Custom Order Approved', 'CustomOrder', id, 'system');
        refresh();
        toast('Custom order approved');
    };

    const rejectCustomOrder = (id) => {
        db.update('customOrders', id, { status: 'Rejected' });
        refresh();
        toast('Custom order rejected');
    };

    return (
        <div>
            <div className="header" style={{background: 'var(--purple)'}}>
                <div className="list-icon" style={{background:'rgba(255,255,255,0.2)',color:'white'}}><i className="fas fa-calendar-alt"></i></div>
                <h1>Scheduler</h1>
                <button className="header-btn" onClick={() => setModal('newRoute')}><i className="fas fa-plus"></i></button>
            </div>

            <div className="inner-tabs">
                <button className={`inner-tab ${view === 'pending' ? 'active' : ''}`} onClick={() => setView('pending')}>Pending ({pendingCount})</button>
                <button className={`inner-tab ${view === 'routes' ? 'active' : ''}`} onClick={() => setView('routes')}>Routes</button>
                <button className={`inner-tab ${view === 'custom' ? 'active' : ''}`} onClick={() => setView('custom')}>Custom Orders</button>
            </div>

            <div className="content">
                {view === 'pending' && (
                    <>
                        {pendingCount > 0 && <div className="alert alert-danger"><i className="fas fa-exclamation-circle"></i> <strong>{pendingCount}</strong> items pending approval</div>}

                        {pendingDeliveries.length > 0 && (
                            <>
                                <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Delivery Requests ({pendingDeliveries.length})</div>
                                <div className="card">
                                    {pendingDeliveries.map(dr => {
                                        const customer = getCustomer(dr.customerId);
                                        const order = getOrder(dr.orderId);
                                        return (
                                            <div key={dr.id} className="list-item">
                                                <div className="list-icon" style={{background:'#fee2e2',color:'var(--danger)'}}><i className="fas fa-truck"></i></div>
                                                <div className="list-content">
                                                    <div className="list-title">{customer?.name} - {order?.number}</div>
                                                    <div className="list-subtitle">{dr.type} {dr.haulAway ? '+ Haul Away' : ''}</div>
                                                    <div className="list-subtitle">Needs by: {dr.neededBy || 'ASAP'}</div>
                                                </div>
                                                <button className="btn btn-sm btn-success" onClick={() => approveDelivery(dr.id)}>Approve</button>
                                            </div>
                                        );
                                    })}
                                </div>
                            </>
                        )}

                        {pendingTransfers.length > 0 && (
                            <>
                                <div className="card-header" style={{background:'transparent',padding:'8px 0',marginTop:16}}>Transfer Requests ({pendingTransfers.length})</div>
                                <div className="card">
                                    {pendingTransfers.map(tr => (
                                        <div key={tr.id} className="list-item">
                                            <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-exchange-alt"></i></div>
                                            <div className="list-content">
                                                <div className="list-title">{tr.brand} {tr.model}</div>
                                                <div className="list-subtitle">{tr.fromLocation}  {tr.toLocation}</div>
                                            </div>
                                            <Badge status={tr.status} />
                                        </div>
                                    ))}
                                </div>
                            </>
                        )}

                        {pendingCount === 0 && <div className="empty-state"><i className="fas fa-check-circle" style={{color:'var(--success)'}}></i><p>All caught up!</p></div>}
                    </>
                )}

                {view === 'routes' && (
                    <>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Today's Routes</div>
                        {routes.map(route => (
                            <div key={route.id} className="card">
                                <div className="list-item">
                                    <div className="list-icon" style={{background:'#dcfce7',color:'var(--success)'}}><i className="fas fa-route"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">Route #{route.number}  {route.name}</div>
                                        <div className="list-subtitle">Driver: {route.driverId}</div>
                                        <div className="progress-bar" style={{marginTop:8,width:'80%'}}>
                                            <div className="progress-fill" style={{width:`${route.stops?.length ? (route.stops.filter(s => s.status === 'Complete').length / route.stops.length) * 100 : 0}%`,background:'var(--success)'}}></div>
                                        </div>
                                        <div className="list-subtitle">{route.stops?.filter(s => s.status === 'Complete').length}/{route.stops?.length} stops</div>
                                    </div>
                                    <Badge status={route.status} />
                                </div>
                            </div>
                        ))}
                    </>
                )}

                {view === 'custom' && (
                    <>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Custom Orders <button className="btn btn-sm btn-primary" onClick={() => setModal('newCustomOrder')}><i className="fas fa-plus"></i></button></div>
                        {customOrders.map(co => {
                            const customer = getCustomer(co.customerId);
                            return (
                                <div key={co.id} className="card">
                                    <div className="list-item">
                                        <div className="list-icon" style={{background:'#f3e8ff',color:'var(--purple)'}}><i className="fas fa-couch"></i></div>
                                        <div className="list-content">
                                            <div className="list-title">{co.number} - {co.manufacturer} {co.item}</div>
                                            <div className="list-subtitle">{customer?.name}  ${co.price}</div>
                                            <div className="list-subtitle">Deposit: {co.depositPaid ? ' Paid' : 'Pending'} (${co.deposit?.toFixed(2)})</div>
                                        </div>
                                        <div className="list-meta">
                                            <Badge status={co.status} />
                                            {co.status === 'Pending Approval' && (
                                                <div style={{marginTop:4,display:'flex',gap:4}}>
                                                    <button className="btn btn-sm btn-success" onClick={() => approveCustomOrder(co.id)}></button>
                                                    <button className="btn btn-sm btn-danger" onClick={() => rejectCustomOrder(co.id)}></button>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            );
                        })}
                    </>
                )}
            </div>

            <div className="bottom-nav">
                <button className={`nav-item ${view === 'pending' ? 'active' : ''}`} onClick={() => setView('pending')}><i className="fas fa-inbox"></i>Pending</button>
                <button className={`nav-item ${view === 'routes' ? 'active' : ''}`} onClick={() => setView('routes')}><i className="fas fa-route"></i>Routes</button>
                <button className={`nav-item ${view === 'custom' ? 'active' : ''}`} onClick={() => setView('custom')}><i className="fas fa-box"></i>Custom</button>
            </div>
        </div>
    );
};

// ============ WARRANTY / CS APP ============
const WarrantyApp = () => {
    const { data, refresh, toast } = useApp();
    const [view, setView] = useState('dashboard');
    const [modal, setModal] = useState(null);

    const workOrders = data.workOrders || [];
    const exchanges = data.exchanges || [];
    const returns = data.returns || [];
    
    const openCases = workOrders.filter(w => w.status !== 'Complete').length + returns.filter(r => r.status === 'Pending').length;
    const partsOrdered = workOrders.filter(w => w.status === 'Parts Ordered').length;

    const getCustomer = (id) => data.customers?.find(c => c.id === id);

    const completeWorkOrder = (id) => {
        db.update('workOrders', id, { status: 'Complete' });
        db.log('Work Order Completed', 'WorkOrder', id, 'system');
        refresh();
        toast('Work order completed');
    };

    const approveReturn = (id) => {
        db.update('returns', id, { status: 'Approved' });
        db.log('Return Approved', 'Return', id, 'system');
        refresh();
        toast('Return approved');
    };

    const createWorkOrder = () => {
        const wo = db.create('workOrders', {
            number: `WO-${2002 + workOrders.length}`,
            customerId: document.getElementById('woCustomer')?.value,
            type: document.getElementById('woType')?.value || 'Service',
            problem: document.getElementById('woProblem')?.value || '',
            status: 'Pending',
            techId: document.getElementById('woTech')?.value,
            scheduledDate: document.getElementById('woDate')?.value
        });
        db.log('Work Order Created', 'WorkOrder', wo.number, 'system');
        refresh();
        setModal(null);
        toast(`Work order ${wo.number} created`);
    };

    const createReturn = () => {
        const originalPrice = parseFloat(document.getElementById('retPrice')?.value) || 0;
        const reason = document.getElementById('retReason')?.value || 'Changed Mind';
        const restockPct = reason === 'Defective' ? 0 : 15;
        const restockingFee = originalPrice * restockPct / 100;
        
        const ret = db.create('returns', {
            number: `RET-${3002 + returns.length}`,
            customerId: document.getElementById('retCustomer')?.value,
            reason,
            status: 'Pending',
            originalPrice,
            restockingFee,
            refundAmount: originalPrice - restockingFee,
            notes: document.getElementById('retNotes')?.value || ''
        });
        db.log('Return Created', 'Return', ret.number, 'system');
        refresh();
        setModal(null);
        toast(`Return ${ret.number} created`);
    };

    return (
        <div>
            <div className="header" style={{background: 'var(--danger)'}}>
                <div className="list-icon" style={{background:'rgba(255,255,255,0.2)',color:'white'}}><i className="fas fa-headset"></i></div>
                <h1>Warranty / CS</h1>
                <button className="header-btn" onClick={() => setModal('menu')}><i className="fas fa-plus"></i></button>
            </div>

            <div className="inner-tabs">
                <button className={`inner-tab ${view === 'dashboard' ? 'active' : ''}`} onClick={() => setView('dashboard')}>Dashboard</button>
                <button className={`inner-tab ${view === 'workorders' ? 'active' : ''}`} onClick={() => setView('workorders')}>Work Orders</button>
                <button className={`inner-tab ${view === 'returns' ? 'active' : ''}`} onClick={() => setView('returns')}>Returns</button>
            </div>

            <div className="content">
                {view === 'dashboard' && (
                    <>
                        <div className="stats-grid">
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--danger)'}}>{openCases}</div><div className="stat-label">Open Cases</div></div>
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--warning)'}}>{partsOrdered}</div><div className="stat-label">Awaiting Parts</div></div>
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--primary)'}}>{exchanges.length}</div><div className="stat-label">Exchanges</div></div>
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--orange)'}}>{returns.filter(r => r.status === 'Pending').length}</div><div className="stat-label">Pending Returns</div></div>
                        </div>

                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Recent Activity</div>
                        <div className="card">
                            {workOrders.slice(0, 3).map(wo => (
                                <div key={wo.id} className="list-item" onClick={() => setModal({type:'woDetail', wo})}>
                                    <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-tools"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{wo.number} - {wo.type}</div>
                                        <div className="list-subtitle">{getCustomer(wo.customerId)?.name}  {wo.problem?.slice(0, 30)}...</div>
                                    </div>
                                    <Badge status={wo.status} />
                                </div>
                            ))}
                            {returns.slice(0, 2).map(ret => (
                                <div key={ret.id} className="list-item" onClick={() => setModal({type:'returnDetail', ret})}>
                                    <div className="list-icon" style={{background:'#fee2e2',color:'var(--danger)'}}><i className="fas fa-undo"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{ret.number} - Return</div>
                                        <div className="list-subtitle">{getCustomer(ret.customerId)?.name}  {ret.reason}</div>
                                    </div>
                                    <Badge status={ret.status} />
                                </div>
                            ))}
                        </div>
                    </>
                )}

                {view === 'workorders' && (
                    <>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>
                            Work Orders ({workOrders.length})
                            <button className="btn btn-sm btn-primary" onClick={() => setModal('newWO')}><i className="fas fa-plus"></i></button>
                        </div>
                        <div className="card">
                            {workOrders.map(wo => (
                                <div key={wo.id} className="list-item" onClick={() => setModal({type:'woDetail', wo})}>
                                    <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-tools"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{wo.number} - {wo.type}</div>
                                        <div className="list-subtitle">{getCustomer(wo.customerId)?.name}</div>
                                        <div className="list-subtitle">{wo.problem}</div>
                                    </div>
                                    <div className="list-meta">
                                        <Badge status={wo.status} />
                                        {wo.status !== 'Complete' && <button className="btn btn-sm btn-success" style={{marginTop:4}} onClick={(e) => { e.stopPropagation(); completeWorkOrder(wo.id); }}>Done</button>}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </>
                )}

                {view === 'returns' && (
                    <>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>
                            Returns ({returns.length})
                            <button className="btn btn-sm btn-primary" onClick={() => setModal('newReturn')}><i className="fas fa-plus"></i></button>
                        </div>
                        <div className="card">
                            {returns.map(ret => (
                                <div key={ret.id} className="list-item" onClick={() => setModal({type:'returnDetail', ret})}>
                                    <div className="list-icon" style={{background:'#fee2e2',color:'var(--danger)'}}><i className="fas fa-undo"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{ret.number} - {getCustomer(ret.customerId)?.name}</div>
                                        <div className="list-subtitle">{ret.reason}</div>
                                        <div className="list-subtitle">Refund: ${ret.refundAmount?.toFixed(2)} (after ${ret.restockingFee?.toFixed(2)} fee)</div>
                                    </div>
                                    <div className="list-meta">
                                        <Badge status={ret.status} />
                                        {ret.status === 'Pending' && <button className="btn btn-sm btn-success" style={{marginTop:4}} onClick={(e) => { e.stopPropagation(); approveReturn(ret.id); }}>Approve</button>}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </>
                )}
            </div>

            <div className="bottom-nav">
                <button className={`nav-item ${view === 'dashboard' ? 'active' : ''}`} onClick={() => setView('dashboard')}><i className="fas fa-home"></i>Dashboard</button>
                <button className={`nav-item ${view === 'workorders' ? 'active' : ''}`} onClick={() => setView('workorders')}><i className="fas fa-tools"></i>Work Orders</button>
                <button className={`nav-item ${view === 'returns' ? 'active' : ''}`} onClick={() => setView('returns')}><i className="fas fa-undo"></i>Returns</button>
            </div>

            {/* MODALS */}
            {modal === 'menu' && (
                <Modal title="Create New" onClose={() => setModal(null)}>
                    <button className="btn btn-outline btn-block" style={{marginBottom:12}} onClick={() => setModal('newWO')}><i className="fas fa-tools"></i> Work Order</button>
                    <button className="btn btn-outline btn-block" style={{marginBottom:12}} onClick={() => setModal('newExchange')}><i className="fas fa-exchange-alt"></i> Exchange</button>
                    <button className="btn btn-outline btn-block" onClick={() => setModal('newReturn')}><i className="fas fa-undo"></i> Return</button>
                </Modal>
            )}

            {modal === 'newWO' && (
                <Modal title="New Work Order" onClose={() => setModal(null)} footer={
                    <button className="btn btn-success" style={{flex:1}} onClick={createWorkOrder}><i className="fas fa-check"></i> Create</button>
                }>
                    <FormField label="Customer" id="woCustomer" type="select" options={(data.customers || []).map(c => ({value:c.id, label:c.name}))} />
                    <FormField label="Type" id="woType" type="select" options={['Warranty Repair','Service Call','Installation','Maintenance']} />
                    <FormField label="Problem" id="woProblem" type="textarea" placeholder="Describe the issue..." />
                    <FormField label="Technician" id="woTech" type="select" options={(data.users || []).filter(u => u.role === 'Technician').map(u => ({value:u.id, label:u.name}))} />
                    <FormField label="Scheduled Date" id="woDate" type="date" />
                </Modal>
            )}

            {modal === 'newReturn' && (
                <Modal title="New Return" onClose={() => setModal(null)} footer={
                    <button className="btn btn-success" style={{flex:1}} onClick={createReturn}><i className="fas fa-check"></i> Create</button>
                }>
                    <FormField label="Customer" id="retCustomer" type="select" options={(data.customers || []).map(c => ({value:c.id, label:c.name}))} />
                    <FormField label="Reason" id="retReason" type="select" options={['Changed Mind','Defective','Wrong Item','Damaged in Transit']} />
                    <FormField label="Original Price" id="retPrice" type="number" placeholder="0.00" />
                    <FormField label="Notes" id="retNotes" type="textarea" placeholder="Additional details..." />
                    <div className="alert alert-info" style={{marginTop:16}}>
                        <i className="fas fa-info-circle"></i>
                        <div>15% restocking fee applies except for defective items</div>
                    </div>
                </Modal>
            )}

            {modal?.type === 'woDetail' && (
                <Modal title={modal.wo.number} onClose={() => setModal(null)} footer={
                    modal.wo.status !== 'Complete' && <button className="btn btn-success" style={{flex:1}} onClick={() => { completeWorkOrder(modal.wo.id); setModal(null); }}><i className="fas fa-check"></i> Complete</button>
                }>
                    <div className="info-row"><span>Type:</span><span>{modal.wo.type}</span></div>
                    <div className="info-row"><span>Customer:</span><span>{getCustomer(modal.wo.customerId)?.name}</span></div>
                    <div className="info-row"><span>Problem:</span><span>{modal.wo.problem}</span></div>
                    <div className="info-row"><span>Status:</span><Badge status={modal.wo.status} /></div>
                    <div className="info-row"><span>Scheduled:</span><span>{modal.wo.scheduledDate || '-'}</span></div>
                </Modal>
            )}

            {modal?.type === 'returnDetail' && (
                <Modal title={modal.ret.number} onClose={() => setModal(null)} footer={
                    modal.ret.status === 'Pending' && <button className="btn btn-success" style={{flex:1}} onClick={() => { approveReturn(modal.ret.id); setModal(null); }}><i className="fas fa-check"></i> Approve Return</button>
                }>
                    <div className="info-row"><span>Customer:</span><span>{getCustomer(modal.ret.customerId)?.name}</span></div>
                    <div className="info-row"><span>Reason:</span><span>{modal.ret.reason}</span></div>
                    <div className="info-row"><span>Original Price:</span><span>${modal.ret.originalPrice?.toFixed(2)}</span></div>
                    <div className="info-row"><span>Restocking Fee:</span><span>${modal.ret.restockingFee?.toFixed(2)}</span></div>
                    <div className="info-row" style={{fontWeight:700}}><span>Refund Amount:</span><span style={{color:'var(--success)'}}>${modal.ret.refundAmount?.toFixed(2)}</span></div>
                    <div className="info-row"><span>Status:</span><Badge status={modal.ret.status} /></div>
                </Modal>
            )}
        </div>
    );
};

// ============ ADMIN APP ============
const AdminApp = () => {
    const { data, refresh, toast } = useApp();
    const [view, setView] = useState('overview');
    const [modal, setModal] = useState(null);

    const orders = data.orders || [];
    const inventory = data.inventory || [];
    const users = data.users || [];
    const customers = data.customers || [];
    const activityLog = data.activityLog || [];
    const brandRankings = data.brandRankings || [];
    const locationRankings = data.locationRankings || [];

    const completedOrders = orders.filter(o => o.status === 'Complete');
    const totalRevenue = completedOrders.reduce((s, o) => s + (o.total || 0), 0);
    const totalCommission = completedOrders.reduce((s, o) => s + (o.items || []).reduce((c, id) => {
        const item = inventory.find(i => i.id === id);
        return c + (item ? item.price * (COMMISSION_RATES[item.condition] || 8) / 100 : 0);
    }, 0), 0);

    const salesByUser = useMemo(() => {
        return users.filter(u => u.role === 'Sales').map(user => {
            const userOrders = completedOrders.filter(o => o.salesId === user.id);
            const revenue = userOrders.reduce((s, o) => s + (o.total || 0), 0);
            const commission = userOrders.reduce((sum, o) => sum + (o.items || []).reduce((c, id) => {
                const item = inventory.find(i => i.id === id);
                return c + (item ? item.price * (COMMISSION_RATES[item.condition] || 8) / 100 : 0);
            }, 0), 0);
            return { ...user, orders: userOrders.length, revenue, commission };
        }).sort((a, b) => b.revenue - a.revenue);
    }, [users, completedOrders, inventory]);

    const getLocation = (id) => data.locations?.find(l => l.id === id);

    const createUser = () => {
        const name = document.getElementById('userName')?.value;
        const email = document.getElementById('userEmail')?.value;
        if (!name || !email) return toast('Name and email required');
        
        db.create('users', {
            name, email,
            role: document.getElementById('userRole')?.value || 'Sales',
            location: document.getElementById('userLocation')?.value || 'loc_1',
            phone: document.getElementById('userPhone')?.value || ''
        });
        db.log('User Created', 'User', name, 'admin');
        refresh();
        setModal(null);
        toast('User created');
    };

    const resetDatabase = () => {
        if (confirm('Reset all data to defaults? This cannot be undone.')) {
            db.reset();
            refresh();
            toast('Database reset to defaults');
            setModal(null);
        }
    };

    return (
        <div>
            <div className="header" style={{background: 'var(--dark)'}}>
                <div className="list-icon" style={{background:'rgba(255,255,255,0.2)',color:'white'}}><i className="fas fa-chart-line"></i></div>
                <h1>Admin</h1>
                <button className="header-btn" onClick={() => setModal('settings')}><i className="fas fa-cog"></i></button>
            </div>

            <div className="inner-tabs">
                <button className={`inner-tab ${view === 'overview' ? 'active' : ''}`} onClick={() => setView('overview')}>Overview</button>
                <button className={`inner-tab ${view === 'payroll' ? 'active' : ''}`} onClick={() => setView('payroll')}>Payroll</button>
                <button className={`inner-tab ${view === 'users' ? 'active' : ''}`} onClick={() => setView('users')}>Users</button>
                <button className={`inner-tab ${view === 'activity' ? 'active' : ''}`} onClick={() => setView('activity')}>Activity</button>
            </div>

            <div className="content">
                {view === 'overview' && (
                    <>
                        <div className="revenue-card">
                            <div style={{fontSize:12,opacity:0.8}}>Total Revenue</div>
                            <div className="revenue-amount">${totalRevenue.toFixed(2)}</div>
                            <div className="revenue-meta">
                                <div><span style={{opacity:0.7}}>Orders:</span> <strong>{completedOrders.length}</strong></div>
                                <div><span style={{opacity:0.7}}>Commissions:</span> <strong>${totalCommission.toFixed(2)}</strong></div>
                            </div>
                        </div>

                        <div className="stats-grid">
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--primary)'}}>{orders.length}</div><div className="stat-label">Total Orders</div></div>
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--success)'}}>{inventory.length}</div><div className="stat-label">Inventory</div></div>
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--orange)'}}>{customers.length}</div><div className="stat-label">Customers</div></div>
                            <div className="stat-card"><div className="stat-value" style={{color:'var(--purple)'}}>{users.length}</div><div className="stat-label">Users</div></div>
                        </div>

                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Top Salespeople</div>
                        <div className="card">
                            {salesByUser.slice(0, 5).map((user, idx) => (
                                <div key={user.id} className="list-item">
                                    <div className="list-icon" style={{background:idx===0?'#fef3c7':'#f3f4f6',color:idx===0?'#f59e0b':'var(--gray-500)'}}>
                                        <i className={`fas fa-${idx===0?'trophy':idx===1?'medal':'user'}`}></i>
                                    </div>
                                    <div className="list-content">
                                        <div className="list-title">{user.name}</div>
                                        <div className="list-subtitle">{user.orders} orders  ${user.revenue.toFixed(0)} revenue</div>
                                    </div>
                                    <div className="list-meta">
                                        <div className="list-price" style={{color:'var(--success)'}}>${user.commission.toFixed(2)}</div>
                                        <div style={{fontSize:10,color:'var(--gray-500)'}}>commission</div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        <div className="card-header" style={{background:'transparent',padding:'8px 0',marginTop:16}}>Top Brands</div>
                        <div className="card">
                            {brandRankings.slice(0, 5).map((brand, idx) => (
                                <div key={idx} className="list-item">
                                    <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)'}}><i className="fas fa-tag"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{brand.Brand}</div>
                                        <div className="list-subtitle">{brand.Qty} units sold</div>
                                    </div>
                                    <div className="list-price">${(brand.Revenue/1000).toFixed(1)}K</div>
                                </div>
                            ))}
                        </div>

                        <div className="card-header" style={{background:'transparent',padding:'8px 0',marginTop:16}}>Sales by Location</div>
                        <div className="card">
                            {locationRankings.map((loc, idx) => (
                                <div key={idx} className="list-item">
                                    <div className="list-icon" style={{background:'#dcfce7',color:'var(--success)'}}><i className="fas fa-store"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{loc.Location}</div>
                                        <div className="list-subtitle">{loc.Qty} orders</div>
                                        <div className="progress-bar" style={{marginTop:8,width:'80%'}}>
                                            <div className="progress-fill" style={{width:`${Math.min(100, (loc.Revenue / (locationRankings[0]?.Revenue || 1)) * 100)}%`,background:'var(--success)'}}></div>
                                        </div>
                                    </div>
                                    <div className="list-price">${(loc.Revenue/1000).toFixed(1)}K</div>
                                </div>
                            ))}
                        </div>
                    </>
                )}

                {view === 'payroll' && (
                    <>
                        <div className="alert alert-info"><i className="fas fa-calendar"></i> Pay Period: Current</div>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Commission Summary</div>
                        <div className="card">
                            {salesByUser.map(user => (
                                <div key={user.id} className="list-item" onClick={() => setModal({type:'payrollDetail', user})}>
                                    <div className="list-icon" style={{background:'#dcfce7',color:'var(--success)'}}><i className="fas fa-user"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{user.name}</div>
                                        <div className="list-subtitle">{user.orders} sales  ${user.revenue.toFixed(0)} revenue</div>
                                    </div>
                                    <div className="list-price" style={{color:'var(--success)'}}>${user.commission.toFixed(2)}</div>
                                </div>
                            ))}
                        </div>
                        <div style={{background:'white',padding:16,borderRadius:12,marginTop:16}}>
                            <div className="info-row"><span>Total Commissions:</span><strong>${totalCommission.toFixed(2)}</strong></div>
                            <div className="info-row"><span>Total Revenue:</span><strong>${totalRevenue.toFixed(2)}</strong></div>
                            <div className="info-row"><span>Avg Commission Rate:</span><strong>{totalRevenue > 0 ? ((totalCommission/totalRevenue)*100).toFixed(1) : 0}%</strong></div>
                        </div>
                    </>
                )}

                {view === 'users' && (
                    <>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>
                            Users ({users.length})
                            <button className="btn btn-sm btn-primary" onClick={() => setModal('newUser')}><i className="fas fa-plus"></i></button>
                        </div>
                        <div className="card">
                            {users.map(user => (
                                <div key={user.id} className="list-item" onClick={() => setModal({type:'editUser', user})}>
                                    <div className="list-icon" style={{background:'#f3e8ff',color:'var(--purple)'}}><i className="fas fa-user"></i></div>
                                    <div className="list-content">
                                        <div className="list-title">{user.name}</div>
                                        <div className="list-subtitle">{user.email}</div>
                                    </div>
                                    <span className="badge badge-success">{user.role}</span>
                                </div>
                            ))}
                        </div>
                    </>
                )}

                {view === 'activity' && (
                    <>
                        <div className="card-header" style={{background:'transparent',padding:'8px 0'}}>Activity Log ({activityLog.length})</div>
                        <div className="card">
                            {activityLog.slice(0, 20).map(act => (
                                <div key={act.id} className="list-item">
                                    <div className="list-icon" style={{background:'#dbeafe',color:'var(--primary)',width:36,height:36,fontSize:14}}><i className="fas fa-history"></i></div>
                                    <div className="list-content">
                                        <div className="list-title" style={{fontSize:13}}>{act.action}</div>
                                        <div className="list-subtitle">{act.details}</div>
                                        <div className="list-subtitle">{new Date(act.timestamp).toLocaleString()}</div>
                                    </div>
                                </div>
                            ))}
                            {activityLog.length === 0 && <div style={{padding:20,textAlign:'center',color:'var(--gray-400)'}}>No activity yet</div>}
                        </div>
                    </>
                )}
            </div>

            <div className="bottom-nav">
                <button className={`nav-item ${view === 'overview' ? 'active' : ''}`} onClick={() => setView('overview')}><i className="fas fa-chart-pie"></i>Overview</button>
                <button className={`nav-item ${view === 'payroll' ? 'active' : ''}`} onClick={() => setView('payroll')}><i className="fas fa-dollar-sign"></i>Payroll</button>
                <button className={`nav-item ${view === 'users' ? 'active' : ''}`} onClick={() => setView('users')}><i className="fas fa-users"></i>Users</button>
                <button className={`nav-item ${view === 'activity' ? 'active' : ''}`} onClick={() => setView('activity')}><i className="fas fa-history"></i>Activity</button>
            </div>

            {/* MODALS */}
            {modal === 'newUser' && (
                <Modal title="New User" onClose={() => setModal(null)} footer={
                    <button className="btn btn-primary" style={{flex:1}} onClick={createUser}><i className="fas fa-check"></i> Create User</button>
                }>
                    <FormField label="Name" id="userName" required placeholder="Full name" />
                    <FormField label="Email" id="userEmail" type="email" required placeholder="email@example.com" />
                    <FormField label="Phone" id="userPhone" placeholder="(xxx) xxx-xxxx" />
                    <FormField label="Role" id="userRole" type="select" options={['Admin','Sales','Warehouse','Driver','Technician','Manager']} />
                    <FormField label="Location" id="userLocation" type="select" options={(data.locations || []).map(l => ({value:l.id, label:l.name}))} />
                </Modal>
            )}

            {modal?.type === 'editUser' && (
                <Modal title="Edit User" onClose={() => setModal(null)} footer={
                    <button className="btn btn-primary" style={{flex:1}} onClick={() => {
                        db.update('users', modal.user.id, {
                            name: document.getElementById('editUserName')?.value,
                            email: document.getElementById('editUserEmail')?.value,
                            role: document.getElementById('editUserRole')?.value,
                            location: document.getElementById('editUserLocation')?.value
                        });
                        refresh(); setModal(null); toast('User updated');
                    }}><i className="fas fa-save"></i> Save Changes</button>
                }>
                    <FormField label="Name" id="editUserName" defaultValue={modal.user.name} />
                    <FormField label="Email" id="editUserEmail" type="email" defaultValue={modal.user.email} />
                    <FormField label="Role" id="editUserRole" type="select" defaultValue={modal.user.role} options={['Admin','Sales','Warehouse','Driver','Technician','Manager']} />
                    <FormField label="Location" id="editUserLocation" type="select" defaultValue={modal.user.location} options={(data.locations || []).map(l => ({value:l.id, label:l.name}))} />
                </Modal>
            )}

            {modal?.type === 'payrollDetail' && (
                <Modal title={`${modal.user.name} - Payroll`} onClose={() => setModal(null)}>
                    <div className="info-row"><span>Orders:</span><span>{modal.user.orders}</span></div>
                    <div className="info-row"><span>Revenue:</span><span>${modal.user.revenue.toFixed(2)}</span></div>
                    <div className="info-row" style={{fontWeight:700}}><span>Commission:</span><span style={{color:'var(--success)'}}>${modal.user.commission.toFixed(2)}</span></div>
                </Modal>
            )}

            {modal === 'settings' && (
                <Modal title="Settings" onClose={() => setModal(null)}>
                    <div className="card" style={{marginBottom:16}}>
                        <div className="list-item">
                            <div className="list-content">
                                <div className="list-title">Database</div>
                                <div className="list-subtitle">Reset to default sample data</div>
                            </div>
                            <button className="btn btn-sm btn-danger" onClick={resetDatabase}>Reset</button>
                        </div>
                    </div>
                    <div className="alert alert-info">
                        <i className="fas fa-info-circle"></i>
                        <div>
                            <strong>RetailAOT v5.0</strong><br/>
                            Data stored in browser localStorage
                        </div>
                    </div>
                </Modal>
            )}
        </div>
    );
};

// ============ MAIN APP ============
const App = () => {
    const [activeApp, setActiveApp] = useState('sales');
    const [data, setData] = useState(() => db.data);
    const [toastMsg, setToastMsg] = useState(null);
    const [currentUser] = useState(() => db.data.users?.[0] || { id: 'u1', name: 'Demo User', role: 'Sales' });

    const refresh = useCallback(() => setData({ ...db.data }), []);
    const toast = useCallback((msg) => setToastMsg(msg), []);

    const apps = [
        { id: 'sales', label: 'Sales', icon: 'fa-cash-register', component: SalesPOS, color: 'var(--primary)' },
        { id: 'warehouse', label: 'Warehouse', icon: 'fa-warehouse', component: WarehouseApp, color: 'var(--orange)' },
        { id: 'delivery', label: 'Delivery', icon: 'fa-truck', component: DeliveryApp, color: 'var(--success)' },
        { id: 'scheduler', label: 'Scheduler', icon: 'fa-calendar-alt', component: SchedulerApp, color: 'var(--purple)' },
        { id: 'warranty', label: 'Warranty', icon: 'fa-headset', component: WarrantyApp, color: 'var(--danger)' },
        { id: 'admin', label: 'Admin', icon: 'fa-chart-line', component: AdminApp, color: 'var(--dark)' },
    ];

    const ActiveApp = apps.find(a => a.id === activeApp)?.component || SalesPOS;

    return (
        <AppContext.Provider value={{ data, refresh, toast, currentUser }}>
            <div className="app-shell">
                <nav className="app-nav">
                    {apps.map(app => (
                        <button 
                            key={app.id} 
                            className={`app-btn ${activeApp === app.id ? 'active' : ''}`}
                            onClick={() => setActiveApp(app.id)}
                        >
                            <i className={`fas ${app.icon}`}></i>
                            <span>{app.label}</span>
                        </button>
                    ))}
                </nav>
                <ActiveApp />
            </div>
            {toastMsg && <Toast message={toastMsg} onClose={() => setToastMsg(null)} />}
        </AppContext.Provider>
    );
};

// Mount the app
ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
